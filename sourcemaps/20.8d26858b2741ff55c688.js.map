{"version":3,"sources":["webpack:///./src/Routes/AccessRequestDetailsPage.js"],"names":["BaseAccessRequestDetailsPage","isInternal","React","request","setRequest","requestId","useParams","dispatch","useDispatch","fetch","API_BASE","then","res","json","errors","Error","map","e","detail","join","err","addNotification","variant","title","description","message","type","openModal","setOpenModal","onModalClose","actions","getInternalActions","status","isDropdownOpen","setIsDropdownOpen","requestDisplayProps","PageSection","Breadcrumb","BreadcrumbItem","render","Link","to","Flex","direction","default","md","FlexItem","grow","Title","headingLevel","size","className","items","length","alignSelf","Dropdown","position","toggle","KebabToggle","onToggle","id","isOpen","isPlain","dropdownItems","onClick","DropdownItem","key","component","isDisabled","disable","spaceItems","xl","lg","flex","Card","ouiaId","style","height","CardTitle","CardBody","Label","getLabelProps","capitalize","prop","replace","Spinner","roles","onClose","AccessRequestDetailsPage","getRegistry","Provider","store","getStore","propTypes","PropTypes"],"mappings":"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","file":"js/20.271b2ebd8f1b0bccaae5.js","sourcesContent":["import React from 'react';\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  PageSection,\n  Title,\n  Card,\n  CardTitle,\n  CardBody,\n  Flex,\n  FlexItem,\n  Spinner,\n  Label,\n  Dropdown,\n  DropdownItem,\n  KebabToggle,\n} from '@patternfly/react-core';\nimport { capitalize } from '@patternfly/react-core/dist/esm/helpers/util';\nimport { Link, useParams } from 'react-router-dom';\nimport { useDispatch, Provider } from 'react-redux';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport MUARolesTable from '../Components/MUARolesTable';\nimport CancelRequestModal from '../Components/CancelRequestModal';\nimport EditRequestModal from '../Components/EditRequestModal';\nimport { getLabelProps } from '../Helpers/getLabelProps';\nimport { getInternalActions, StatusLabel } from '../Helpers/getActions';\nimport PropTypes from 'prop-types';\n\nconst BaseAccessRequestDetailsPage = ({ isInternal }) => {\n  const [request, setRequest] = React.useState();\n  const { requestId } = useParams();\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    fetch(`${API_BASE}/cross-account-requests/${requestId}/`)\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.errors) {\n          throw Error(res.errors.map((e) => e.detail).join('\\n'));\n        }\n        setRequest(res);\n      })\n      .catch((err) => {\n        dispatch(\n          addNotification({\n            variant: 'danger',\n            title: 'Could not load access request',\n            description: err.message,\n          })\n        );\n      });\n  }, []);\n\n  // Modal actions\n  const [openModal, setOpenModal] = React.useState({ type: null });\n  const onModalClose = () => setOpenModal({ type: null });\n  const actions = getInternalActions(\n    request && request.status,\n    requestId,\n    setOpenModal\n  );\n  const [isDropdownOpen, setIsDropdownOpen] = React.useState(false);\n\n  const requestDisplayProps = [\n    ...(isInternal\n      ? ['request_id', 'target_account']\n      : ['first_name', 'last_name']),\n    'start_date',\n    'end_date',\n    'created',\n  ];\n  return (\n    <React.Fragment>\n      <PageSection variant=\"light\">\n        <Breadcrumb>\n          <BreadcrumbItem\n            render={() => (\n              <Link to=\"../\">{!isInternal && 'Red Hat '}Access Requests</Link>\n            )}\n          />\n          <BreadcrumbItem>{requestId}</BreadcrumbItem>\n        </Breadcrumb>\n        <Flex direction={{ default: 'column', md: 'row' }}>\n          <FlexItem grow={{ default: 'grow' }}>\n            <Title headingLevel=\"h1\" size=\"2xl\" className=\"pf-u-pt-md\">\n              {requestId}\n            </Title>\n          </FlexItem>\n          {isInternal && actions.items.length > 0 && (\n            <FlexItem alignSelf={{ default: 'alignRight' }}>\n              <Dropdown\n                position=\"right\"\n                toggle={\n                  <KebabToggle\n                    onToggle={() => setIsDropdownOpen(!isDropdownOpen)}\n                    id=\"actions-toggle\"\n                  />\n                }\n                isOpen={isDropdownOpen}\n                isPlain\n                dropdownItems={actions.items.map(({ title, onClick }) => (\n                  <DropdownItem\n                    key={title}\n                    component=\"button\"\n                    onClick={onClick}\n                  >\n                    {title}\n                  </DropdownItem>\n                ))}\n                isDisabled={actions.disable}\n              />\n            </FlexItem>\n          )}\n        </Flex>\n      </PageSection>\n      <PageSection>\n        <Flex\n          spaceItems={{ xl: 'spaceItemsLg' }}\n          direction={{ default: 'column', lg: 'row' }}\n        >\n          <FlexItem\n            flex={{ default: 'flex_1' }}\n            alignSelf={{ default: 'alignSelfStretch' }}\n          >\n            <Card ouiaId=\"request-details\" style={{ height: '100%' }}>\n              <CardTitle>\n                <Title headingLevel=\"h2\" size=\"xl\">\n                  Request details\n                </Title>\n              </CardTitle>\n              <CardBody>\n                {!request ? (\n                  <Spinner size=\"xl\" />\n                ) : (\n                  <React.Fragment>\n                    <div className=\"pf-u-pb-md\">\n                      {isInternal ? (\n                        <div>\n                          <label>\n                            <b>Request status</b>\n                          </label>\n                          <br />\n                          <Label\n                            className=\"pf-u-mt-sm\"\n                            {...getLabelProps(request.status)}\n                          >\n                            {capitalize(request.status)}\n                          </Label>\n                        </div>\n                      ) : (\n                        <React.Fragment>\n                          <label>\n                            <b>Request decision</b>\n                          </label>\n                          <br />\n                          <StatusLabel\n                            requestId={requestId}\n                            status={request.status}\n                          />\n                        </React.Fragment>\n                      )}\n                    </div>\n                    {requestDisplayProps.map((prop, key) => (\n                      <div className=\"pf-u-pb-md\" key={key}>\n                        <label>\n                          <b>\n                            {capitalize(\n                              prop.replace(/_/g, ' ').replace('id', 'ID')\n                            )}\n                          </b>\n                        </label>\n                        <br />\n                        <div>{request[prop]}</div>\n                      </div>\n                    ))}\n                  </React.Fragment>\n                )}\n              </CardBody>\n            </Card>\n          </FlexItem>\n          <FlexItem\n            flex={{ default: 'flex_3' }}\n            grow={{ default: 'grow' }}\n            alignSelf={{ default: 'alignSelfStretch' }}\n          >\n            <Card ouiaId=\"request-roles\" style={{ height: '100%' }}>\n              <CardTitle>\n                <Title headingLevel=\"h2\" size=\"xl\">\n                  Roles requested\n                </Title>\n              </CardTitle>\n              <CardBody>\n                {!request ? (\n                  <Spinner size=\"xl\" />\n                ) : (\n                  <MUARolesTable roles={request.roles} />\n                )}\n              </CardBody>\n            </Card>\n          </FlexItem>\n        </Flex>\n      </PageSection>\n      {openModal.type === 'cancel' && (\n        <CancelRequestModal requestId={requestId} onClose={onModalClose} />\n      )}\n      {openModal.type === 'edit' && (\n        <EditRequestModal\n          variant=\"edit\"\n          requestId={requestId}\n          onClose={onModalClose}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\n// This component is a federated module used in https://github.com/RedHatInsights/insights-rbac-ui\n// Try not to break RBAC.\nconst AccessRequestDetailsPage = ({ getRegistry, isInternal }) => (\n  <Provider store={getRegistry().getStore()}>\n    <BaseAccessRequestDetailsPage isInternal={isInternal} />\n  </Provider>\n);\n\nAccessRequestDetailsPage.propTypes = {\n  getRegistry: PropTypes.func,\n  isInternal: PropTypes.bool,\n};\n\nBaseAccessRequestDetailsPage.propTypes = {\n  isInternal: PropTypes.bool,\n};\n\nexport default AccessRequestDetailsPage;\n"],"sourceRoot":""}