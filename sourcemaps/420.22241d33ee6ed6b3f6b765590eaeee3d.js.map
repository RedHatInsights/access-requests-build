{"version":3,"file":"js/420.1664460677503.c5520031ff47b7dcb0be.js","mappings":"yRASMA,EAAM,SAAC,GAAiB,IAAfC,EAAe,EAAfA,SACPC,GAAUC,EAAAA,EAAAA,cAehB,OAdAC,EAAAA,EAAAA,YAAU,WACRC,SAASC,OAAOC,OAEhBF,SAASC,OAAOE,YAAY,mBAC5B,IAAMC,EAAaJ,SAASC,OAAOI,GAAG,kBAAkB,SAACC,GAAU,MACtC,EAAvBA,MAAAA,GAAJ,UAAIA,EAAOC,gBAAX,OAAI,EAAiBC,MACnBX,EAAQY,KAAKH,MAAAA,GAAb,UAAaA,EAAOC,gBAApB,aAAa,EAAiBC,KAAKE,QAAQd,GAAW,OAG1D,OAAO,WACLQ,OAED,IAGD,kBAAC,EAAAO,SAAD,KACE,kBAAC,KAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,SAMRhB,EAAIiB,UAAY,CACdhB,SAAUiB,IAAAA,OAAAA,YAGZ,W,4HC/BMjB,GAAWkB,E,QAAAA,IAAYC,OAAOC,SAASC,SAAU,GAgBvD,QAdiB,kBACf,kBAAC,aAAD,CACEC,MAAO,CACLC,YAAa,kBAAMC,EAAAA,KAGrB,kBAAC,KAAD,CAAUC,MAAOD,EAAAA,EAAAA,YACf,kBAAC,gBAAD,CAAQxB,SAAUA,GAChB,kBAAC,IAAD,CAAKA,SAAUA,S,oICXjB0B,EAAc,CAClB,IAAKC,EAAAA,GAGDC,EAAqB,SAAC,GAAiB,IAAfC,EAAe,EAAfA,SACtBC,GAAYC,EAAAA,EAAAA,KAAY,qBAAGC,aAAgBF,aACzCT,GAAaY,EAAAA,EAAAA,eAAbZ,SACFa,GAAWC,EAAAA,EAAAA,MAQjB,IANAhC,EAAAA,EAAAA,YAAU,WACJ2B,GACFI,EAAS,CAAEE,KAAMC,EAAAA,EAAWC,aAASC,MAEtC,CAAClB,IAEAS,EAAW,CACb,IAAMU,EAAQd,EAAYI,GAE1B,OAAO,kBAACU,EAAD,CAAOC,YADD,oBAIf,OAAOZ,GAGTD,EAAmBZ,UAAY,CAC7Ba,SAAUZ,IAAAA,KAAAA,YAGZ,W,8CCnCO,IAAMoB,EAAY,a,+GCQnBK,GAAqBC,EAAAA,EAAAA,OAAK,kBAAM,4EAChCC,GAA2BD,EAAAA,EAAAA,OAAK,kBACpC,4EAKIE,EACJ,kBAAC,EAAAC,SAAD,KACE,kBAAC,EAAAC,QAAD,OAISC,EAAS,WACpB,IAAQzB,GAAgB0B,EAAAA,EAAAA,YAAWC,EAAAA,GAA3B3B,YACR,GAAkC4B,EAAAA,EAAAA,WAAS,GAA3C,eAAOC,EAAP,KAAkBC,EAAlB,KACA,GAAoCF,EAAAA,EAAAA,WAAS,GAA7C,eAAOG,EAAP,KAAmBC,EAAnB,KAUA,OARApD,EAAAA,EAAAA,YAAU,WACRC,SAASC,OAAOC,OAChBkD,QAAQC,QAAQrD,SAASC,OAAOqD,KAAKC,WAAWC,MAAK,SAACC,GAAS,QAC7DN,EAAcM,MAAAA,GAAD,UAACA,EAAMC,gBAAP,iBAAC,EAAgBD,YAAjB,aAAC,EAAsBE,aACpCV,GAAa,QAEd,IAEED,EAKH,kBAAC,EAAAY,SAAD,CAAUnB,SAAUA,IA1BVoB,EAoCR,kBAAC,EAAAC,OAAD,KACE,kBAAC,EAAAC,MAAD,CAAOC,KAAK,mBAAmBC,OAAK,GAClC,kBAAC3B,EAAD,CACEY,WAAYA,EACZ/B,YAAaA,KAGjB,kBAAC,EAAA4C,MAAD,CAAOC,KAAK,+BACV,kBAACxB,EAAD,CACEU,WAAYA,EACZ/B,YAAaA,KAGjB,kBAAC,EAAA4C,MAAD,KACE,kBAAC,EAAAG,SAAD,CAAUC,GAAG,wBA5BZ1B,I,yHCzBX,SAJqB,UAClBR,EAAAA,GALmB,SAACmC,EAAD,SAAqB,CACzC1C,UADoB,EAAMQ,YCMrB,IAAMY,GAAkBuB,EAAAA,EAAAA,eAAc,CAC3ClD,YAAa,eAGTC,EAAW,IAAIkD,EAAAA,GAAgB,GAAI,EACvCC,EAAAA,EAAAA,IAAwB,CACtBC,cAAe,CAAC,WAChBC,oBAAqB,CAAC,SAAU,aAIpCrD,EAASsD,SAAS,CAChB9C,cAAc+C,EAAAA,EAAAA,IAAiB/C,GAC/BgD,cAAeC,EAAAA,KAGjB,W","sources":["webpack:///./src/App.js","webpack:///./src/AppEntry.js","webpack:///./src/Components/ErrorReducerCatcher.js","webpack:///./src/Redux/action-types.js","webpack:///./src/Routes.js","webpack:///./src/Redux/error-reducer.js","webpack:///./src/store.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { Routes } from './Routes';\nimport NotificationPortal from '@redhat-cloud-services/frontend-components-notifications/NotificationPortal';\nimport ErroReducerCatcher from './Components/ErrorReducerCatcher';\n\nimport './index.css';\n\nconst App = ({ basename }) => {\n  const history = useHistory();\n  useEffect(() => {\n    insights.chrome.init();\n\n    insights.chrome.identifyApp('access-requests');\n    const unregister = insights.chrome.on('APP_NAVIGATION', (event) => {\n      if (event?.domEvent?.href) {\n        history.push(event?.domEvent?.href.replace(basename), '');\n      }\n    });\n    return () => {\n      unregister();\n    };\n  }, []);\n\n  return (\n    <Fragment>\n      <NotificationPortal />\n      <ErroReducerCatcher>\n        <Routes />\n      </ErroReducerCatcher>\n    </Fragment>\n  );\n};\n\nApp.propTypes = {\n  basename: PropTypes.string.isRequired,\n};\n\nexport default App;\n","import React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport registry, { RegistryContext } from './store';\nimport App from './App';\nimport { getBaseName } from '@redhat-cloud-services/frontend-components-utilities/helpers/helpers';\n\n// the UI has to be accessible from both /internal and /internal/access-requests. The basename has to be /internal always\nconst basename = getBaseName(window.location.pathname, 2);\n\nconst AppEntry = () => (\n  <RegistryContext.Provider\n    value={{\n      getRegistry: () => registry,\n    }}\n  >\n    <Provider store={registry.getStore()}>\n      <Router basename={basename}>\n        <App basename={basename} />\n      </Router>\n    </Provider>\n  </RegistryContext.Provider>\n);\n\nexport default AppEntry;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport NotAuthorized from '@redhat-cloud-services/frontend-components/NotAuthorized/NotAuthorized';\nimport { useLocation } from 'react-router-dom';\nimport { API_ERROR } from '../Redux/action-types';\n\nconst errorStates = {\n  403: NotAuthorized,\n};\n\nconst ErroReducerCatcher = ({ children }) => {\n  const errorCode = useSelector(({ errorReducer: { errorCode } }) => errorCode);\n  const { pathname } = useLocation();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (errorCode) {\n      dispatch({ type: API_ERROR, payload: undefined });\n    }\n  }, [pathname]);\n\n  if (errorCode) {\n    const State = errorStates[errorCode];\n    const name = 'Access Requests';\n    return <State serviceName={name} />;\n  }\n\n  return children;\n};\n\nErroReducerCatcher.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default ErroReducerCatcher;\n","export const API_ERROR = 'API_ERROR';\n","import { Redirect, Route, Switch } from 'react-router-dom';\nimport React, { Suspense, lazy, useContext, useState, useEffect } from 'react';\nimport {\n  Bullseye,\n  Spinner,\n  Switch as ToggleSwitch,\n} from '@patternfly/react-core';\n\nconst AccessRequestsPage = lazy(() => import('./Routes/AccessRequestsPage'));\nconst AccessRequestDetailsPage = lazy(() =>\n  import('./Routes/AccessRequestDetailsPage')\n);\nimport { RegistryContext } from './store';\nconst isDev = process.env.NODE_ENV !== 'production';\n\nconst fallback = (\n  <Bullseye>\n    <Spinner />\n  </Bullseye>\n);\n\nexport const Routes = () => {\n  const { getRegistry } = useContext(RegistryContext);\n  const [userReady, setUserReady] = useState(false);\n  const [isInternal, setIsInternal] = useState(true);\n\n  useEffect(() => {\n    insights.chrome.init();\n    Promise.resolve(insights.chrome.auth.getUser()).then((user) => {\n      setIsInternal(user?.identity?.user?.is_internal);\n      setUserReady(true);\n    });\n  }, []);\n\n  if (!userReady) {\n    return fallback;\n  }\n\n  return (\n    <Suspense fallback={fallback}>\n      {isDev && (\n        <ToggleSwitch\n          id=\"toggle-view\"\n          label=\"Internal view\"\n          labelOff=\"External view\"\n          checked={isInternal}\n          onChange={() => setIsInternal((prev) => !prev)}\n        />\n      )}\n      <Switch>\n        <Route path=\"/access-requests\" exact>\n          <AccessRequestsPage\n            isInternal={isInternal}\n            getRegistry={getRegistry}\n          />\n        </Route>\n        <Route path=\"/access-requests/:requestId\">\n          <AccessRequestDetailsPage\n            isInternal={isInternal}\n            getRegistry={getRegistry}\n          />\n        </Route>\n        <Route>\n          <Redirect to=\"/access-requests\" />\n        </Route>\n      </Switch>\n    </Suspense>\n  );\n};\n","import { API_ERROR } from './action-types';\n\nconst setErrorState = (_, { payload }) => ({\n  errorCode: payload,\n});\n\nconst errorReducer = {\n  [API_ERROR]: setErrorState,\n};\n\nexport default errorReducer;\n","import { createContext } from 'react';\nimport ReducerRegistry, {\n  applyReducerHash,\n} from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport notificationsMiddleware from '@redhat-cloud-services/frontend-components-notifications/notificationsMiddleware';\nimport { notificationsReducer } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport errorReducer from './Redux/error-reducer';\n\nexport const RegistryContext = createContext({\n  getRegistry: () => {},\n});\n\nconst registry = new ReducerRegistry({}, [\n  notificationsMiddleware({\n    errorTitleKey: ['message'],\n    errorDescriptionKey: ['errors', 'stack'],\n  }),\n]);\n\nregistry.register({\n  errorReducer: applyReducerHash(errorReducer),\n  notifications: notificationsReducer,\n});\n\nexport default registry;\n"],"names":["App","basename","history","useHistory","useEffect","insights","chrome","init","identifyApp","unregister","on","event","domEvent","href","push","replace","Fragment","propTypes","PropTypes","getBaseName","window","location","pathname","value","getRegistry","registry","store","errorStates","NotAuthorized","ErroReducerCatcher","children","errorCode","useSelector","errorReducer","useLocation","dispatch","useDispatch","type","API_ERROR","payload","undefined","State","serviceName","AccessRequestsPage","lazy","AccessRequestDetailsPage","fallback","Bullseye","Spinner","Routes","useContext","RegistryContext","useState","userReady","setUserReady","isInternal","setIsInternal","Promise","resolve","auth","getUser","then","user","identity","is_internal","Suspense","process","Switch","Route","path","exact","Redirect","to","_","createContext","ReducerRegistry","notificationsMiddleware","errorTitleKey","errorDescriptionKey","register","applyReducerHash","notifications","notificationsReducer"],"sourceRoot":""}