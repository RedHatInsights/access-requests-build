{"version":3,"file":"js/605.a2a8c4b9e06742f7ccd0.js","mappings":"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","sources":["webpack:///./node_modules/@redhat-cloud-services/frontend-components-notifications/esm/redux/actions/notifications.js","webpack:///./src/Redux/action-types.js","webpack:///./src/Routes/AccessRequestDetailsPage.js","webpack:///./src/Redux/error-reducer.js","webpack:///./src/store.js","webpack:///./node_modules/react-redux/es/hooks/useDispatch.js"],"sourcesContent":["import { ADD_NOTIFICATION, REMOVE_NOTIFICATION, CLEAR_NOTIFICATIONS } from './action-types';\nexport var addNotification = function addNotification(notification) {\n  return {\n    type: ADD_NOTIFICATION,\n    payload: notification\n  };\n};\nexport var removeNotification = function removeNotification(index) {\n  return {\n    type: REMOVE_NOTIFICATION,\n    payload: index\n  };\n};\nexport var clearNotifications = function clearNotifications() {\n  return {\n    type: CLEAR_NOTIFICATIONS\n  };\n};\nexport default {\n  addNotification: addNotification,\n  removeNotification: removeNotification,\n  clearNotifications: clearNotifications\n};","export const API_ERROR = 'API_ERROR';\n","import React from 'react';\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  PageSection,\n  Title,\n  Card,\n  CardTitle,\n  CardBody,\n  Flex,\n  FlexItem,\n  Spinner,\n  Label,\n  Dropdown,\n  DropdownItem,\n  KebabToggle,\n} from '@patternfly/react-core';\nimport { capitalize } from '@patternfly/react-core/dist/esm/helpers/util';\nimport { Link, useParams } from 'react-router-dom';\nimport { useDispatch, Provider } from 'react-redux';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport MUARolesTable from '../Components/MUARolesTable';\nimport CancelRequestModal from '../Components/CancelRequestModal';\nimport EditRequestModal from '../Components/EditRequestModal';\nimport { getLabelProps } from '../Helpers/getLabelProps';\nimport { getInternalActions, StatusLabel } from '../Helpers/getActions';\nimport PropTypes from 'prop-types';\nimport apiInstance from '../Helpers/apiInstance';\n\nconst BaseAccessRequestDetailsPage = ({ isInternal }) => {\n  const [request, setRequest] = React.useState();\n  const { requestId } = useParams();\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    apiInstance\n      .get(\n        `${API_BASE}/cross-account-requests/${requestId}/${\n          isInternal ? '?query_by=user_id' : ''\n        }`,\n        { headers: { Accept: 'application/json' } }\n      )\n      .then((res) => {\n        if (res.errors) {\n          throw Error(res.errors.map((e) => e.detail).join('\\n'));\n        }\n        setRequest(res);\n      })\n      .catch((err) => {\n        dispatch(\n          addNotification({\n            variant: 'danger',\n            title: 'Could not load access request',\n            description: err.message,\n          })\n        );\n      });\n  }, []);\n\n  // Modal actions\n  const [openModal, setOpenModal] = React.useState({ type: null });\n  const onModalClose = () => setOpenModal({ type: null });\n  const actions = getInternalActions(\n    request && request.status,\n    requestId,\n    setOpenModal\n  );\n  const [isDropdownOpen, setIsDropdownOpen] = React.useState(false);\n\n  const requestDisplayProps = [\n    ...(isInternal\n      ? ['request_id', 'target_account']\n      : ['first_name', 'last_name']),\n    'start_date',\n    'end_date',\n    'created',\n  ];\n  return (\n    <React.Fragment>\n      <PageSection variant=\"light\">\n        <Breadcrumb>\n          <BreadcrumbItem\n            render={() => (\n              <Link to={isInternal ? '/' : '/access-requests'}>\n                {!isInternal && 'Red Hat '}Access Requests\n              </Link>\n            )}\n          />\n          <BreadcrumbItem>{requestId}</BreadcrumbItem>\n        </Breadcrumb>\n        <Flex direction={{ default: 'column', md: 'row' }}>\n          <FlexItem grow={{ default: 'grow' }}>\n            <Title headingLevel=\"h1\" size=\"2xl\" className=\"pf-u-pt-md\">\n              {requestId}\n            </Title>\n          </FlexItem>\n          {isInternal && actions.items.length > 0 && (\n            <FlexItem alignSelf={{ default: 'alignRight' }}>\n              <Dropdown\n                position=\"right\"\n                toggle={\n                  <KebabToggle\n                    onToggle={() => setIsDropdownOpen(!isDropdownOpen)}\n                    id=\"actions-toggle\"\n                  />\n                }\n                isOpen={isDropdownOpen}\n                isPlain\n                dropdownItems={actions.items.map(({ title, onClick }) => (\n                  <DropdownItem\n                    key={title}\n                    component=\"button\"\n                    onClick={onClick}\n                  >\n                    {title}\n                  </DropdownItem>\n                ))}\n                isDisabled={actions.disable}\n              />\n            </FlexItem>\n          )}\n        </Flex>\n      </PageSection>\n      <PageSection>\n        <Flex\n          spaceItems={{ xl: 'spaceItemsLg' }}\n          direction={{ default: 'column', lg: 'row' }}\n        >\n          <FlexItem\n            flex={{ default: 'flex_1' }}\n            alignSelf={{ default: 'alignSelfStretch' }}\n          >\n            <Card ouiaId=\"request-details\" style={{ height: '100%' }}>\n              <CardTitle>\n                <Title headingLevel=\"h2\" size=\"xl\">\n                  Request details\n                </Title>\n              </CardTitle>\n              <CardBody>\n                {!request ? (\n                  <Spinner size=\"xl\" />\n                ) : (\n                  <React.Fragment>\n                    <div className=\"pf-u-pb-md\">\n                      {isInternal ? (\n                        <div>\n                          <label>\n                            <b>Request status</b>\n                          </label>\n                          <br />\n                          <Label\n                            className=\"pf-u-mt-sm\"\n                            {...getLabelProps(request.status)}\n                          >\n                            {capitalize(request.status)}\n                          </Label>\n                        </div>\n                      ) : (\n                        <React.Fragment>\n                          <label>\n                            <b>Request decision</b>\n                          </label>\n                          <br />\n                          <StatusLabel\n                            requestId={requestId}\n                            status={request.status}\n                          />\n                        </React.Fragment>\n                      )}\n                    </div>\n                    {requestDisplayProps.map((prop, key) => (\n                      <div className=\"pf-u-pb-md\" key={key}>\n                        <label>\n                          <b>\n                            {capitalize(\n                              prop.replace(/_/g, ' ').replace('id', 'ID')\n                            )}\n                          </b>\n                        </label>\n                        <br />\n                        <div>{request[prop]}</div>\n                      </div>\n                    ))}\n                  </React.Fragment>\n                )}\n              </CardBody>\n            </Card>\n          </FlexItem>\n          <FlexItem\n            flex={{ default: 'flex_3' }}\n            grow={{ default: 'grow' }}\n            alignSelf={{ default: 'alignSelfStretch' }}\n          >\n            <Card ouiaId=\"request-roles\" style={{ height: '100%' }}>\n              <CardTitle>\n                <Title headingLevel=\"h2\" size=\"xl\">\n                  Roles requested\n                </Title>\n              </CardTitle>\n              <CardBody>\n                {!request ? (\n                  <Spinner size=\"xl\" />\n                ) : (\n                  <MUARolesTable roles={request.roles} />\n                )}\n              </CardBody>\n            </Card>\n          </FlexItem>\n        </Flex>\n      </PageSection>\n      {openModal.type === 'cancel' && (\n        <CancelRequestModal requestId={requestId} onClose={onModalClose} />\n      )}\n      {openModal.type === 'edit' && (\n        <EditRequestModal\n          variant=\"edit\"\n          requestId={requestId}\n          onClose={onModalClose}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\n// This component is a federated module used in https://github.com/RedHatInsights/insights-rbac-ui\n// Try not to break RBAC.\nconst AccessRequestDetailsPage = ({ getRegistry, isInternal }) => (\n  <Provider store={getRegistry().getStore()}>\n    <BaseAccessRequestDetailsPage isInternal={isInternal} />\n  </Provider>\n);\n\nAccessRequestDetailsPage.propTypes = {\n  getRegistry: PropTypes.func,\n  isInternal: PropTypes.bool,\n};\n\nBaseAccessRequestDetailsPage.propTypes = {\n  isInternal: PropTypes.bool,\n};\n\nexport default AccessRequestDetailsPage;\n","import { API_ERROR } from './action-types';\n\nconst setErrorState = (_, { payload }) => ({\n  errorCode: payload,\n});\n\nconst errorReducer = {\n  [API_ERROR]: setErrorState,\n};\n\nexport default errorReducer;\n","import { createContext } from 'react';\nimport ReducerRegistry, {\n  applyReducerHash,\n} from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport notificationsMiddleware from '@redhat-cloud-services/frontend-components-notifications/notificationsMiddleware';\nimport { notificationsReducer } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport errorReducer from './Redux/error-reducer';\n\nexport const RegistryContext = createContext({\n  getRegistry: () => {},\n});\n\nconst registry = new ReducerRegistry({}, [\n  notificationsMiddleware({\n    errorTitleKey: ['message'],\n    errorDescriptionKey: ['errors', 'stack'],\n  }),\n]);\n\nregistry.register({\n  errorReducer: applyReducerHash(errorReducer),\n  notifications: notificationsReducer,\n});\n\nexport default registry;\n","import { ReactReduxContext } from '../components/Context';\nimport { useStore as useDefaultStore, createStoreHook } from './useStore';\n/**\n * Hook factory, which creates a `useDispatch` hook bound to a given context.\n *\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\n * @returns {Function} A `useDispatch` hook bound to the specified context.\n */\n\nexport function createDispatchHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n\n  var useStore = context === ReactReduxContext ? useDefaultStore : createStoreHook(context);\n  return function useDispatch() {\n    var store = useStore();\n    return store.dispatch;\n  };\n}\n/**\n * A hook to access the redux `dispatch` function.\n *\n * @returns {any|function} redux store's `dispatch` function\n *\n * @example\n *\n * import React, { useCallback } from 'react'\n * import { useDispatch } from 'react-redux'\n *\n * export const CounterComponent = ({ value }) => {\n *   const dispatch = useDispatch()\n *   const increaseCounter = useCallback(() => dispatch({ type: 'increase-counter' }), [])\n *   return (\n *     <div>\n *       <span>{value}</span>\n *       <button onClick={increaseCounter}>Increase counter</button>\n *     </div>\n *   )\n * }\n */\n\nexport var useDispatch = /*#__PURE__*/createDispatchHook();"],"names":["addNotification","notification","type","payload","removeNotification","index","clearNotifications","API_ERROR","BaseAccessRequestDetailsPage","isInternal","React","request","setRequest","requestId","useParams","dispatch","useDispatch","apiInstance","API_BASE","headers","Accept","then","res","errors","Error","map","e","detail","join","err","variant","title","description","message","openModal","setOpenModal","onModalClose","actions","getInternalActions","status","isDropdownOpen","setIsDropdownOpen","requestDisplayProps","PageSection","Breadcrumb","BreadcrumbItem","render","Link","to","Flex","direction","default","md","FlexItem","grow","Title","headingLevel","size","className","items","length","alignSelf","Dropdown","position","toggle","KebabToggle","onToggle","id","isOpen","isPlain","dropdownItems","onClick","DropdownItem","key","component","isDisabled","disable","spaceItems","xl","lg","flex","Card","ouiaId","style","height","CardTitle","CardBody","Label","getLabelProps","capitalize","prop","replace","Spinner","roles","onClose","AccessRequestDetailsPage","getRegistry","store","getStore","propTypes","PropTypes","_","errorCode","RegistryContext","createContext","registry","ReducerRegistry","notificationsMiddleware","errorTitleKey","errorDescriptionKey","register","errorReducer","applyReducerHash","notifications","notificationsReducer","createDispatchHook","context","useStore"],"sourceRoot":""}