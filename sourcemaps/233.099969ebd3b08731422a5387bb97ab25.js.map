{"version":3,"file":"js/233.643d7e1f7beb243d6baf.js","mappings":"6OAQMA,EAAc,CAClB,IAAKC,KAGDC,EAAqB,SAAC,GAAiB,IAAfC,EAAe,EAAfA,SACtBC,GAAYC,EAAAA,EAAAA,KAAY,qBAAGC,aAAgBF,SAAnB,IACtBG,GAAaC,EAAAA,EAAAA,eAAbD,SACFE,GAAWC,EAAAA,EAAAA,MAQjB,IANAC,EAAAA,EAAAA,YAAU,WACJP,GACFK,EAAS,CAAEG,KAAMC,EAAAA,EAAWC,aAASC,GAExC,GAAE,CAACR,IAEAH,EAAW,CACb,IAAMY,EAAQhB,EAAYI,GAE1B,OAAO,kBAACY,EAAD,CAAOC,YADD,mBAEd,CAED,OACE,kBAAC,EAAAC,SAAD,KACE,kBAAC,KAAD,MACCf,EAGN,EAEDD,EAAmBiB,UAAY,CAC7BhB,SAAUiB,IAAAA,KAAeC,YAG3B,S,gDCzCO,IAAMR,EAAY,W,sJCWzB,QAVkB,CACdS,KAAM,mBACNC,MAAO,KAQX,EANwB,CACpBD,KAAM,8BACNC,MAAO,e,eCAX,MAAMC,GAAqB,IAAAC,OAAK,IAAM,qGAChCC,GAA2B,IAAAD,OAC/B,IAAM,sGAUFE,EAAe,CAACC,EAAsB,KAC1CA,EAAOC,KAAI,EAAGC,OAAMC,QAASC,EAASC,cAAaC,kBACjD,kBAAC,EAAAC,MAAK,CAACC,IAAKN,EAAMA,KAAMA,EAAMC,QAAS,kBAACC,EAAO,IAAKE,KACjDP,EAAaM,MA6CpB,EAvCuB,EAAGI,eACxB,MAAOC,EAAYC,IAAiB,IAAAC,UAASH,EAASC,YAEhDV,EAAS,CACb,CACEE,KAAM,EAAyBP,MAC/BQ,QAASP,EACTU,aAAc,CAAEI,eAElB,CACER,KAAM,EAA+BP,MACrCQ,QAASL,EACTQ,aAAc,CAAEI,gBAIdG,GAAiB,IAAAC,UAAQ,IAAMf,EAAaC,IAAS,CAACA,IAE5D,OACE,kBAAC,EAAAe,SAAQ,CAACC,SAAU,EAAA1B,WArBV,EAgCR,kBAAC,EAAA2B,OAAM,KACJJ,EAED,kBAAC,EAAAN,MAAK,CAACL,KAAK,IAAIC,QAAS,kBAACe,EAAA,EAAa,SAG5C,ECpCH,EApBY,WACV,IAAMT,ECDY,MAClB,MAAMU,GAAS,EAAAC,EAAA,MACRX,EAAUY,IAAe,IAAAT,UAAmB,CACjDU,OAAO,EACPZ,YAAY,IAad,OAVA,IAAA3B,YAAU,KACJoC,IAAWV,EAASa,OACtBH,EAAOI,KAAKC,UAAUC,MAAMC,IAC1BL,EAAY,CACVC,OAAO,EACPZ,WAAYgB,GAAMC,UAAUD,MAAME,aAClC,GACF,GACH,CAACT,EAAQV,EAASa,QAEdb,CAAQ,EDhBEoB,GAEjB,OAAKpB,EAASa,MASZ,kBAAC,EAAAhC,SAAD,KACE,kBAAC,IAAD,KACE,kBAAC,EAAD,CAASmB,SAAUA,MATrB,kBAAC,EAAAqB,SAAD,KACE,kBAAC,EAAAC,QAAD,MAYP,EEAD,EApBiB,WACf,IAAMZ,GAASC,EAAAA,EAAAA,KAMf,OAJArC,EAAAA,EAAAA,YAAU,WACRoC,EAAOa,oBAAoB,kBAC5B,GAAE,IAGD,kBAAC,IAAgBC,SAAjB,CACEC,MAAO,CACLC,YAAa,kBAAMC,EAAAA,CAAN,IAGf,kBAAC,KAAD,CAAUC,MAAOD,EAAAA,EAASE,YACxB,kBAAC,EAAD,OAIP,ECpBD,IAAMC,EAAOC,SAASC,eAAe,QAErCC,IAAAA,OAAgB,kBAAC,EAAD,MAAcH,GAAM,kBAClCA,EAAKI,aAAa,kBAAkB,EADF,G,2HCIpC,SAJqB,UAClB1D,EAAAA,GALmB,SAAC2D,EAAD,SAAqB,CACzCpE,UADoB,EAAMU,QAAN,ICMf,IAAM2D,GAAkBC,EAAAA,EAAAA,eAAc,CAC3CX,YAAa,WAAQ,IAGjBC,EAAW,IAAIW,EAAAA,GAAgB,CAAC,EAAG,EACvCC,EAAAA,EAAAA,IAAwB,CACtBC,cAAe,CAAC,WAChBC,oBAAqB,CAAC,SAAU,aAIpCd,EAASe,SAAS,CAChBzE,cAAc0E,EAAAA,EAAAA,IAAiB1E,GAC/B2E,cAAeC,EAAAA,KAGjB,S","sources":["webpack:///./src/Components/ErrorReducerCatcher.js","webpack:///./src/Redux/action-types.js","webpack:///./src/pathnames.js","webpack:///./src/Routing.tsx","webpack:///./src/App.js","webpack:///./src/Hooks/useUserData.ts","webpack:///./src/AppEntry.js","webpack:///./src/bootstrap.js","webpack:///./src/Redux/error-reducer.js","webpack:///./src/store.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport NotAuthorized from '@redhat-cloud-services/frontend-components/NotAuthorized/NotAuthorized';\nimport NotificationPortal from '@redhat-cloud-services/frontend-components-notifications/NotificationPortal/';\nimport { useLocation } from 'react-router-dom';\nimport { API_ERROR } from '../Redux/action-types';\n\nconst errorStates = {\n  403: NotAuthorized,\n};\n\nconst ErroReducerCatcher = ({ children }) => {\n  const errorCode = useSelector(({ errorReducer: { errorCode } }) => errorCode);\n  const { pathname } = useLocation();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (errorCode) {\n      dispatch({ type: API_ERROR, payload: undefined });\n    }\n  }, [pathname]);\n\n  if (errorCode) {\n    const State = errorStates[errorCode];\n    const name = 'Access Requests';\n    return <State serviceName={name} />;\n  }\n\n  return (\n    <Fragment>\n      <NotificationPortal />\n      {children}\n    </Fragment>\n  );\n};\n\nErroReducerCatcher.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default ErroReducerCatcher;\n","export const API_ERROR = 'API_ERROR';\n","const pathnames = {\n  accessRequests: {\n    link: '/access-requests',\n    route: '/',\n  },\n  accessRequestsDetail: {\n    link: '/access-requests/:requestId',\n    route: '/:requestId',\n  },\n};\n\nexport default pathnames;\n","import React, { Fragment, Suspense, lazy, useMemo, useState } from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport { Switch as ToggleSwitch } from '@patternfly/react-core';\nimport { UserData } from './Hooks/useUserData';\nimport pathnames from './pathnames';\nimport InvalidObject from '@redhat-cloud-services/frontend-components/InvalidObject';\n\nconst AccessRequestsPage = lazy(() => import('./Routes/AccessRequestsPage'));\nconst AccessRequestDetailsPage = lazy(\n  () => import('./Routes/AccessRequestDetailsPage')\n);\n\ninterface RouteType {\n  path?: string;\n  element: React.ComponentType;\n  childRoutes?: RouteType[];\n  elementProps?: Record<string, unknown>;\n}\n\nconst renderRoutes = (routes: RouteType[] = []) =>\n  routes.map(({ path, element: Element, childRoutes, elementProps }) => (\n    <Route key={path} path={path} element={<Element {...elementProps} />}>\n      {renderRoutes(childRoutes)}\n    </Route>\n  ));\n\nconst isDev = process.env.NODE_ENV !== 'production';\n\nexport const Routing = ({ userData }: { userData: UserData }) => {\n  const [isInternal, setIsInternal] = useState(userData.isInternal);\n\n  const routes = [\n    {\n      path: pathnames.accessRequests.route,\n      element: AccessRequestsPage,\n      elementProps: { isInternal },\n    },\n    {\n      path: pathnames.accessRequestsDetail.route,\n      element: AccessRequestDetailsPage,\n      elementProps: { isInternal },\n    },\n  ];\n\n  const renderedRoutes = useMemo(() => renderRoutes(routes), [routes]);\n\n  return (\n    <Suspense fallback={Fragment}>\n      {isDev && (\n        <ToggleSwitch\n          className=\"pf-u-p-sm\"\n          id=\"toggle-view\"\n          label=\"Internal view\"\n          labelOff=\"External view\"\n          checked={isInternal}\n          onChange={() => setIsInternal((prev) => !prev)}\n        />\n      )}\n      <Routes>\n        {renderedRoutes}\n        {/* Catch all unmatched routes */}\n        <Route path=\"*\" element={<InvalidObject />} />\n      </Routes>\n    </Suspense>\n  );\n};\n\nexport default Routing;\n","import React, { Fragment } from 'react';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport ErroReducerCatcher from './Components/ErrorReducerCatcher';\nimport useUserData from './Hooks/useUserData';\nimport Routing from './Routing';\n\nimport './index.css';\n\nconst App = () => {\n  const userData = useUserData();\n\n  if (!userData.ready) {\n    return (\n      <Bullseye>\n        <Spinner />\n      </Bullseye>\n    );\n  }\n\n  return (\n    <Fragment>\n      <ErroReducerCatcher>\n        <Routing userData={userData} />\n      </ErroReducerCatcher>\n    </Fragment>\n  );\n};\n\nexport default App;\n","import useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport { useEffect, useState } from 'react';\n\nexport interface UserData {\n  ready: boolean;\n  isInternal?: boolean;\n}\n\nconst useUserData = () => {\n  const chrome = useChrome();\n  const [userData, setUserData] = useState<UserData>({\n    ready: false,\n    isInternal: true,\n  });\n\n  useEffect(() => {\n    if (chrome && !userData.ready)\n      chrome.auth.getUser().then((user) => {\n        setUserData({\n          ready: true,\n          isInternal: user?.identity?.user?.is_internal,\n        });\n      });\n  }, [chrome, userData.ready]);\n\n  return userData;\n};\n\nexport default useUserData;\n","import React, { useEffect } from 'react';\nimport { Provider } from 'react-redux';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport registry, { RegistryContext } from './store';\nimport App from './App';\n\nconst AppEntry = () => {\n  const chrome = useChrome();\n\n  useEffect(() => {\n    chrome.updateDocumentTitle('Access Requests');\n  }, []);\n\n  return (\n    <RegistryContext.Provider\n      value={{\n        getRegistry: () => registry,\n      }}\n    >\n      <Provider store={registry.getStore()}>\n        <App />\n      </Provider>\n    </RegistryContext.Provider>\n  );\n};\n\nexport default AppEntry;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport AppEntry from './AppEntry';\n\nconst root = document.getElementById('root');\n\nReactDOM.render(<AppEntry />, root, () =>\n  root.setAttribute('data-ouia-safe', true)\n);\n","import { API_ERROR } from './action-types';\n\nconst setErrorState = (_, { payload }) => ({\n  errorCode: payload,\n});\n\nconst errorReducer = {\n  [API_ERROR]: setErrorState,\n};\n\nexport default errorReducer;\n","import { createContext } from 'react';\nimport ReducerRegistry, {\n  applyReducerHash,\n} from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport notificationsMiddleware from '@redhat-cloud-services/frontend-components-notifications/notificationsMiddleware';\nimport { notificationsReducer } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport errorReducer from './Redux/error-reducer';\n\nexport const RegistryContext = createContext({\n  getRegistry: () => {},\n});\n\nconst registry = new ReducerRegistry({}, [\n  notificationsMiddleware({\n    errorTitleKey: ['message'],\n    errorDescriptionKey: ['errors', 'stack'],\n  }),\n]);\n\nregistry.register({\n  errorReducer: applyReducerHash(errorReducer),\n  notifications: notificationsReducer,\n});\n\nexport default registry;\n"],"names":["errorStates","NotAuthorized","ErroReducerCatcher","children","errorCode","useSelector","errorReducer","pathname","useLocation","dispatch","useDispatch","useEffect","type","API_ERROR","payload","undefined","State","serviceName","Fragment","propTypes","PropTypes","isRequired","link","route","AccessRequestsPage","lazy","AccessRequestDetailsPage","renderRoutes","routes","map","path","element","Element","childRoutes","elementProps","Route","key","userData","isInternal","setIsInternal","useState","renderedRoutes","useMemo","Suspense","fallback","Routes","InvalidObject","chrome","useChrome","setUserData","ready","auth","getUser","then","user","identity","is_internal","useUserData","Bullseye","Spinner","updateDocumentTitle","Provider","value","getRegistry","registry","store","getStore","root","document","getElementById","ReactDOM","setAttribute","_","RegistryContext","createContext","ReducerRegistry","notificationsMiddleware","errorTitleKey","errorDescriptionKey","register","applyReducerHash","notifications","notificationsReducer"],"sourceRoot":""}