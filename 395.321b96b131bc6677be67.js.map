{"version":3,"sources":["webpack://@redhat-cloud-services/access-requests-frontend/./node_modules/@patternfly/react-icons/dist/js/icons/plus-circle-icon.js","webpack://@redhat-cloud-services/access-requests-frontend/./src/Components/AccessRequestsTable.js","webpack://@redhat-cloud-services/access-requests-frontend/./src/Routes/AccessRequestsPage.js"],"names":["exports","name","height","width","svgPath","yOffset","xOffset","uncapitalize","input","toLowerCase","substring","statuses","AccessRequestsTable","isInternal","columns","React","activeSortIndex","setActiveSortIndex","activeSortDirection","setActiveSortDirection","onSort","_ev","index","direction","page","setPage","perPage","setPerPage","AccessRequestsPagination","id","Pagination","itemCount","numRows","onSetPage","pageNumber","variant","onPerPageSelect","isDropdownOpen","setIsDropdownOpen","filterColumn","setFilterColumn","isSelectOpen","setIsSelectOpen","statusSelections","setStatusSelections","accountFilter","setAccountFilter","hasFilters","length","isLoading","setIsLoading","setNumRows","rows","setRows","dispatch","useDispatch","fetchAccessRequests","listUrl","URL","window","location","origin","API_BASE","searchParams","append","join","orderBy","replace","fetch","href","then","res","json","meta","count","data","map","d","request_id","target_account","start_date","end_date","created","status","first_name","last_name","err","addNotification","title","description","message","type","openModal","setOpenModal","onModalClose","isChanged","modals","CancelRequestModal","requestId","onClose","includes","EditRequestModal","createButton","Button","onClick","Bullseye","style","className","EmptyState","EmptyStateIcon","icon","PlusCircleIcon","Title","headingLevel","size","EmptyStateBody","selectLabelId","selectPlaceholder","FilterTextForm","colName","value","setValue","inputValue","setInputValue","display","onSubmit","ev","preventDefault","TextInput","placeholder","aria-label","onChange","val","clearFiltersButton","toolbar","Toolbar","ToolbarContent","ToolbarItem","InputGroup","Dropdown","isOpen","onSelect","target","toggle","DropdownToggle","onToggle","dropdownItems","i","DropdownItem","key","component","capitalize","hidden","Select","aria-labelledby","selection","filter","s","selections","Array","from","isCheckboxSelectionBadgeHidden","placeholderText","SelectOption","align","default","ChipGroup","categoryName","Chip","getColumnWidth","columnIndex","url","useRouteMatch","table","TableComposable","Thead","Tr","column","Th","sort","sortBy","Tbody","keys","j","Td","dataLabel","class","row","rowIndex","Link","to","endsWith","onLabelClick","hideActions","actions","getInternalActions","colSpan","SearchIcon","displayName","withRouter","PageSection","padding"],"mappings":"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","file":"395.321b96b131bc6677be67.js","sourcesContent":["\"use strict\"\nexports.__esModule = true;\nexports.PlusCircleIconConfig = {\n  name: 'PlusCircleIcon',\n  height: 512,\n  width: 512,\n  svgPath: 'M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z',\n  yOffset: 0,\n  xOffset: 0,\n};\nexports.PlusCircleIcon = require('../createIcon').createIcon(exports.PlusCircleIconConfig);\nexports[\"default\"] = exports.PlusCircleIcon;","import React from 'react';\nimport {\n  Toolbar,\n  ToolbarItem,\n  ToolbarContent,\n  Button,\n  InputGroup,\n  TextInput,\n  Pagination,\n  Dropdown,\n  DropdownToggle,\n  DropdownItem,\n  Select,\n  SelectOption,\n  ChipGroup,\n  Chip,\n  Bullseye,\n  EmptyState,\n  EmptyStateIcon,\n  EmptyStateBody,\n  Title\n} from '@patternfly/react-core';\nimport { TableComposable, Thead, Tbody, Tr, Th, Td } from '@patternfly/react-table';\nimport CancelRequestModal from './CancelRequestModal';\nimport EditRequestModal from './EditRequestModal';\nimport { capitalize } from '@patternfly/react-core/dist/esm/helpers/util';\nimport SearchIcon from '@patternfly/react-icons/dist/js/icons/search-icon';\nimport FilterIcon from '@patternfly/react-icons/dist/js/icons/filter-icon';\nimport PlusCircleIcon from '@patternfly/react-icons/dist/js/icons/plus-circle-icon';\nimport { useDispatch } from 'react-redux'\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { getInternalActions, StatusLabel } from '../Helpers/getActions';\n\nfunction uncapitalize(input) {\n  return input[0].toLowerCase() + input.substring(1);\n}\n\nconst statuses = [\n  'pending',\n  'approved',\n  'denied',\n  'cancelled',\n  'expired'\n];\n\nconst AccessRequestsTable = ({ isInternal }) => {\n  const columns = isInternal\n    ? ['Request ID', 'Account number', 'Start date', 'End date', 'Created', 'Status']\n    : ['Request ID', 'First name', 'Last name', 'Start date', 'End date', 'Created', 'Decision'];\n\n  // Sorting\n  const [activeSortIndex, setActiveSortIndex] = React.useState(isInternal ? 4 : 5);\n  const [activeSortDirection, setActiveSortDirection] = React.useState('desc');\n  const onSort = (_ev, index, direction) => {\n    setActiveSortIndex(index);\n    setActiveSortDirection(direction);\n  };\n\n  // Pagination\n  const [page, setPage] = React.useState(1);\n  const [perPage, setPerPage] = React.useState(10);\n  const AccessRequestsPagination = ({ id }) => (\n    <Pagination\n      itemCount={numRows}\n      perPage={perPage}\n      page={page}\n      onSetPage={(_ev, pageNumber) => setPage(pageNumber)}\n      id={'access-requests-table-pagination-' + id}\n      variant={id}\n      onPerPageSelect={(_ev, perPage) => setPerPage(perPage)}\n    />\n  );\n\n  // Filtering\n  const [isDropdownOpen, setIsDropdownOpen] = React.useState(false);\n  const [filterColumn, setFilterColumn] = React.useState(columns[isInternal ? 1 : 6]);\n  const [isSelectOpen, setIsSelectOpen] = React.useState(false);\n  const [statusSelections, setStatusSelections] = React.useState([]);\n  const [accountFilter, setAccountFilter] = React.useState('');\n  const hasFilters = statusSelections.length > 0 || accountFilter;\n\n  // Row loading\n  const [isLoading, setIsLoading] = React.useState(true);\n  const [numRows, setNumRows] = React.useState(0);\n  const [rows, setRows] = React.useState([]);\n  const dispatch = useDispatch();\n  const fetchAccessRequests = () => {\n    setIsLoading(true);\n    const listUrl = new URL(`${window.location.origin}${API_BASE}/cross-account-requests/`);\n    if (isInternal) {\n      listUrl.searchParams.append('query_by', 'user_id');\n    }\n    listUrl.searchParams.append('offset', (page - 1) * perPage);\n    listUrl.searchParams.append('limit', perPage);\n    // https://github.com/RedHatInsights/insights-rbac/blob/master/rbac/api/cross_access/view.py\n    if (accountFilter) {\n      listUrl.searchParams.append('account', accountFilter);\n    }\n    if (statusSelections.length > 0) {\n      listUrl.searchParams.append('status', statusSelections.join(','));\n    }\n    const orderBy = `${activeSortDirection === 'desc' ? '-' : ''}${columns[activeSortIndex].toLowerCase().replace(' ', '_')}`;\n    listUrl.searchParams.append('order_by', orderBy);\n\n    fetch(listUrl.href)\n      .then(res => res.json())\n      .then(res => {\n        setNumRows(res.meta.count);\n        setRows(res.data.map(d => isInternal\n          ? [\n            d.request_id,\n            d.target_account,\n            d.start_date,\n            d.end_date,\n            d.created,\n            d.status\n          ]\n          : [\n            d.request_id,\n            d.first_name,\n            d.last_name,\n            d.start_date,\n            d.end_date,\n            d.created,\n            d.status\n          ]));\n        setIsLoading(false);\n      })\n      .catch(err => {\n        setIsLoading(false);\n        dispatch(addNotification({\n          variant: 'danger',\n          title: 'Could not list access requests',\n          description: err.message\n        }));\n      });\n  };\n  React.useEffect(() => { fetchAccessRequests() }, [\n    accountFilter,\n    statusSelections,\n    activeSortIndex,\n    activeSortDirection,\n    perPage,\n    page\n  ]);\n\n  // Modal actions\n  const [openModal, setOpenModal] = React.useState({ type: null });\n  const onModalClose = isChanged => {\n    setOpenModal({ type: null });\n    if (isChanged) {\n      fetchAccessRequests();\n    }\n  };\n  const modals = (\n    <React.Fragment>\n      {openModal.type === 'cancel' &&\n        <CancelRequestModal\n          requestId={openModal.requestId}\n          onClose={onModalClose}\n        />}\n      {['edit', 'create'].includes(openModal.type) &&\n        <EditRequestModal\n          variant={openModal.type}\n          requestId={openModal.requestId}\n          onClose={onModalClose}\n        />}\n    </React.Fragment>\n  );\n\n  // Rendering\n  const createButton = isInternal && (\n    <Button variant=\"primary\" onClick={() => setOpenModal({ type: 'create' })}>\n      Create request\n    </Button>\n  );\n  if (rows.length === 0 && !isLoading && !hasFilters) {\n    return (\n      <Bullseye style={{ height: 'auto' }} className=\"pf-u-mt-lg\">\n        <EmptyState variant=\"large\">\n          <EmptyStateIcon icon={PlusCircleIcon} />\n          <Title headingLevel=\"h3\" size=\"lg\">\n            {isInternal\n              ? 'No access requests'\n              : 'You have no access requests'}\n          </Title>\n          <EmptyStateBody>\n            {isInternal\n              ? 'Click the button below to create an access request.'\n              : 'You have no pending Red Hat access requests.'}\n          </EmptyStateBody>\n          {createButton}\n        </EmptyState>\n        {modals}\n      </Bullseye>\n    );\n  }\n\n  const selectLabelId = 'filter-status';\n  const selectPlaceholder = `Filter by ${uncapitalize(columns[columns.length - 1])}`;\n  const FilterTextForm = ({ colName, value, setValue }) => {\n    const [inputValue, setInputValue] = React.useState(value);\n    return (\n      <form\n        style={{ display: 'flex' }}\n        onSubmit={ev => {\n          ev.preventDefault();\n          setValue(inputValue);\n        }}\n      >\n        <TextInput\n          name={`${colName}-filter`}\n          id={`${colName}-filter`}\n          type=\"search\"\n          placeholder={`Filter by ${uncapitalize(colName)}`}\n          aria-label={`${colName} search input`}\n          value={inputValue}\n          onChange={val => setInputValue(val)}\n        />\n        <Button variant=\"control\" type=\"submit\" aria-label={`Search button for ${colName} filter`}>\n          <SearchIcon />\n        </Button>\n      </form>\n    );\n  }\n  const clearFiltersButton = (\n    <Button\n      variant=\"link\"\n      onClick={() => { setStatusSelections([]); setAccountFilter(''); }}\n    >\n      Clear filters\n    </Button>\n  );\n  const toolbar = (\n    <Toolbar id=\"access-requests-table-toolbar\">\n      <ToolbarContent>\n        <ToolbarItem>\n          <InputGroup>\n            <Dropdown\n              isOpen={isDropdownOpen}\n              onSelect={ev => { setIsDropdownOpen(false); setFilterColumn(ev.target.value); setIsSelectOpen(false); }}\n              toggle={\n                <DropdownToggle onToggle={isOpen => setIsDropdownOpen(isOpen)}>\n                  <FilterIcon /> {filterColumn}\n                </DropdownToggle>\n              }\n              // https://marvelapp.com/prototype/257je526/screen/74764732\n              dropdownItems={(isInternal ? [1, 5] : [6]).map(i => columns[i]).map(colName =>\n                // Filterable columns are RequestID, AccountID, and Status\n                <DropdownItem key={colName} value={colName} component=\"button\">\n                  {capitalize(colName)}\n                </DropdownItem>\n              )}\n            />\n            {['Status', 'Decision'].includes(filterColumn) &&\n              <React.Fragment>\n                <span id={selectLabelId} hidden>{selectPlaceholder}</span>\n                <Select\n                  aria-labelledby={selectLabelId}\n                  variant=\"checkbox\"\n                  aria-label=\"Select statuses\"\n                  onToggle={isOpen => setIsSelectOpen(isOpen)}\n                  onSelect={(_ev, selection) => {\n                    if (statusSelections.includes(selection)) {\n                      setStatusSelections(statusSelections.filter(s => s !== selection));\n                    }\n                    else {\n                      setStatusSelections([...statusSelections, selection]);\n                    }\n                  }}\n                  isOpen={isSelectOpen}\n                  selections={Array.from(statusSelections)}\n                  isCheckboxSelectionBadgeHidden\n                  placeholderText={selectPlaceholder}\n                >\n                  {statuses.map(status =>\n                    <SelectOption key={status} value={status}>{capitalize(status)}</SelectOption>\n                  )}\n                </Select>\n              </React.Fragment>\n            }\n            {filterColumn === 'Account number' &&\n              <FilterTextForm colName={filterColumn} value={accountFilter} setValue={setAccountFilter} />\n            }\n          </InputGroup>\n        </ToolbarItem>\n        <ToolbarItem>\n          {createButton}\n        </ToolbarItem>\n        <ToolbarItem variant=\"pagination\" align={{ default: 'alignRight' }}>\n          <AccessRequestsPagination id=\"top\" />\n        </ToolbarItem>\n      </ToolbarContent>\n      <ToolbarContent>\n        <ChipGroup categoryName=\"Status\">\n          {statusSelections.map(status =>\n            <Chip key={status} onClick={() => setStatusSelections(statusSelections.filter(s => s !== status))}>\n              {status}\n            </Chip>\n          )}\n        </ChipGroup>\n        {accountFilter &&\n          <ChipGroup categoryName=\"Account number\">\n            <Chip onClick={() => setAccountFilter('')}>\n              {accountFilter}\n            </Chip>\n          </ChipGroup>\n        }\n        {hasFilters && clearFiltersButton}\n      </ToolbarContent>\n    </Toolbar>\n  );\n  function getColumnWidth(columnIndex) {\n    if (isInternal) {\n      return columnIndex === 0 ? 30 : 15;\n    }\n\n    return [0, 6].includes(columnIndex) ? 20 : 10;\n  }\n  const { url } = useRouteMatch();\n  const table = (\n    <TableComposable aria-label=\"Access requests table\" variant=\"compact\">\n      <Thead>\n        <Tr>\n          {columns.map((column, columnIndex) => \n            <Th\n              key={columnIndex}\n              {...!column.includes('name') && {\n                sort: {\n                  sortBy: {\n                    index: activeSortIndex,\n                    direction: activeSortDirection\n                  },\n                  onSort,\n                  columnIndex\n                }}\n              }\n              width={getColumnWidth(columnIndex)}\n            >\n              {column}\n            </Th>\n          )}\n          {isInternal && <Th />}\n        </Tr>\n      </Thead>\n      <Tbody>\n        {isLoading\n          ? [...Array(rows.length || perPage).keys()].map(i =>\n              <Tr key={i}>\n                {columns.map((name, j) =>\n                  <Td key={j} dataLabel={name}>\n                    <div style={{ height: '30px' }} class=\"ins-c-skeleton ins-c-skeleton__md\">{' '}</div>\n                  </Td>\n                )}\n              </Tr>\n            )\n          : rows.map((row, rowIndex) =>\n            <Tr key={rowIndex}>\n              <Td dataLabel={columns[0]}>\n                <Link to={`${url}${url.endsWith('/') ? '' : '/'}${row[0]}`}>{row[0]}</Link>\n              </Td>\n              <Td dataLabel={columns[1]}>\n                {row[1]}\n              </Td>\n              <Td dataLabel={columns[2]}>\n                {row[2]}\n              </Td>\n              <Td dataLabel={columns[3]}>\n                {row[3]}\n              </Td>\n              <Td dataLabel={columns[4]}>\n                {row[4]}\n              </Td>\n              {isInternal\n                ? <Td dataLabel={columns[5]}>\n                    <StatusLabel\n                      requestId={row[0]}\n                      status={row[5]}\n                      onLabelClick={() => setStatusSelections([...statusSelections.filter(s => s !== status), status])}\n                      hideActions\n                    />\n                  </Td>\n                : <Td dataLabel={columns[5]}>\n                    {row[5]}\n                  </Td>\n              }\n              {isInternal\n                // Different actions based on status\n                ? <Td actions={getInternalActions(row[5], row[0], setOpenModal)} />\n                : <Td dataLabel={columns[6]}>\n                    <StatusLabel\n                      requestId={row[0]}\n                      status={row[6]}\n                    />\n                  </Td>\n              }\n            </Tr>\n          )}\n        {rows.length === 0 && hasFilters &&\n          <Tr>\n            <Td colSpan={columns.length}>\n              <EmptyState variant=\"small\">\n                <EmptyStateIcon icon={SearchIcon} />\n                <Title headingLevel=\"h2\" size=\"lg\">\n                  No matching requests found\n                </Title>\n                <EmptyStateBody>\n                  No results match the filter criteria.\n                  Remove all filters or clear all filters to show results.\n                </EmptyStateBody>\n                {clearFiltersButton}\n              </EmptyState>\n            </Td>\n          </Tr>\n        }\n      </Tbody>\n    </TableComposable>\n  );\n\n  return (\n    <React.Fragment>\n      {toolbar}\n      {table}\n      <AccessRequestsPagination id=\"bottom\" />\n      {modals}\n    </React.Fragment>\n  );\n};\n\nAccessRequestsTable.displayName = 'AccessRequestsTable';\n\nexport default AccessRequestsTable;\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { PageSection, Title } from '@patternfly/react-core';\nimport AccessRequestsTable from '../Components/AccessRequestsTable';\n\nconst AccessRequestsPage = ({ isInternal }) => {\n  return (\n    <React.Fragment>\n      <PageSection variant=\"light\">\n        <Title headingLevel=\"h1\" className=\"pf-u-pb-sm\">Access Requests</Title>\n        <p>Below is a list of all submitted requests for read only account access.</p>\n      </PageSection>\n      <PageSection padding={{ default: 'noPadding' }}>\n        <AccessRequestsTable isInternal={isInternal} />\n      </PageSection>\n    </React.Fragment>\n  );\n};\n\nexport default withRouter(AccessRequestsPage);\n"],"sourceRoot":""}