{"version":3,"sources":["webpack://@redhat-cloud-services/access-requests-frontend/./node_modules/@patternfly/react-icons/dist/js/icons/plus-circle-icon.js","webpack://@redhat-cloud-services/access-requests-frontend/./src/Components/AccessRequestsTable.js","webpack://@redhat-cloud-services/access-requests-frontend/./src/Routes/AccessRequestsPage.js"],"names":["exports","name","height","width","svgPath","yOffset","xOffset","statuses","AccessRequestsTable","isInternal","columns","React","activeSortIndex","setActiveSortIndex","activeSortDirection","setActiveSortDirection","onSort","_ev","index","direction","page","setPage","perPage","setPerPage","AccessRequestsPagination","id","Pagination","itemCount","numRows","onSetPage","pageNumber","variant","onPerPageSelect","isDropdownOpen","setIsDropdownOpen","filterColumn","setFilterColumn","isSelectOpen","setIsSelectOpen","statusSelections","setStatusSelections","idFilter","setIdFilter","accountFilter","setAccountFilter","firstNameFilter","setFirstNameFilter","lastNameFilter","setLastNameFilter","isLoading","setIsLoading","setNumRows","rows","setRows","dispatch","useDispatch","fetchAccessRequests","listUrl","URL","window","location","origin","API_BASE","searchParams","append","length","join","toLowerCase","fetch","href","then","res","json","meta","count","data","map","d","request_id","target_account","start_date","end_date","created","status","first_name","last_name","err","addNotification","title","description","message","type","openModal","setOpenModal","onModalClose","isChanged","modals","CancelRequestModal","requestId","onClose","includes","EditRequestModal","createButton","Button","onClick","Bullseye","style","className","Spinner","size","EmptyState","EmptyStateIcon","icon","PlusCircleIcon","Title","headingLevel","EmptyStateBody","input","selectLabelId","selectPlaceholder","substring","FilterTextForm","colName","value","setValue","inputValue","setInputValue","display","onSubmit","ev","preventDefault","TextInput","placeholder","aria-label","onChange","val","toolbar","Toolbar","ToolbarContent","ToolbarItem","InputGroup","Dropdown","isOpen","onSelect","target","toggle","DropdownToggle","onToggle","dropdownItems","i","DropdownItem","key","component","capitalize","hidden","Select","aria-labelledby","selection","filter","s","selections","Array","from","isCheckboxSelectionBadgeHidden","placeholderText","SelectOption","align","default","ChipGroup","categoryName","Chip","getColumnWidth","columnIndex","url","useRouteMatch","table","TableComposable","Thead","Tr","column","Th","sort","sortBy","Tbody","colSpan","row","rowIndex","Td","dataLabel","Link","to","endsWith","onLabelClick","hideActions","actions","getInternalActions","displayName","withRouter","PageSection","padding"],"mappings":"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","file":"395.5805599f2bbd6f3aa43b.js","sourcesContent":["\"use strict\"\nexports.__esModule = true;\nexports.PlusCircleIconConfig = {\n  name: 'PlusCircleIcon',\n  height: 512,\n  width: 512,\n  svgPath: 'M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z',\n  yOffset: 0,\n  xOffset: 0,\n};\nexports.PlusCircleIcon = require('../createIcon').createIcon(exports.PlusCircleIconConfig);\nexports[\"default\"] = exports.PlusCircleIcon;","import React from 'react';\nimport {\n  Label,\n  Toolbar,\n  ToolbarItem,\n  ToolbarContent,\n  Button,\n  InputGroup,\n  TextInput,\n  Pagination,\n  Dropdown,\n  DropdownToggle,\n  DropdownItem,\n  Select,\n  SelectOption,\n  ChipGroup,\n  Chip,\n  Bullseye,\n  Spinner,\n  EmptyState,\n  EmptyStateIcon,\n  EmptyStateBody,\n  Title\n} from '@patternfly/react-core';\nimport { TableComposable, Thead, Tbody, Tr, Th, Td } from '@patternfly/react-table';\nimport CancelRequestModal from './CancelRequestModal';\nimport EditRequestModal from './EditRequestModal';\nimport { capitalize } from '@patternfly/react-core/dist/esm/helpers/util';\nimport SearchIcon from '@patternfly/react-icons/dist/js/icons/search-icon';\nimport FilterIcon from '@patternfly/react-icons/dist/js/icons/filter-icon';\nimport PlusCircleIcon from '@patternfly/react-icons/dist/js/icons/plus-circle-icon';\nimport { useDispatch } from 'react-redux'\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { getInternalActions, StatusLabel } from '../Helpers/getActions';\n\nfunction uncapitalize(input) {\n  return input[0].toLowerCase() + input.substring(1);\n}\n\nconst statuses = [\n  'pending',\n  'approved',\n  'denied',\n  'cancelled',\n  'expired'\n];\n\nconst AccessRequestsTable = ({ isInternal }) => {\n  const columns = isInternal\n    ? ['Request ID', 'Account number', 'Start date', 'End date', 'Created', 'Status']\n    : ['Request ID', 'First name', 'Last name', 'Start date', 'End date', 'Created', 'Decision'];\n\n  // Sorting\n  const [activeSortIndex, setActiveSortIndex] = React.useState(4);\n  const [activeSortDirection, setActiveSortDirection] = React.useState('desc');\n  const onSort = (_ev, index, direction) => {\n    setActiveSortIndex(index);\n    setActiveSortDirection(direction);\n  };\n\n  // Pagination\n  const [page, setPage] = React.useState(1);\n  const [perPage, setPerPage] = React.useState(10);\n  const AccessRequestsPagination = ({ id }) => (\n    <Pagination\n      itemCount={numRows}\n      perPage={perPage}\n      page={page}\n      onSetPage={(_ev, pageNumber) => setPage(pageNumber)}\n      id={'access-requests-table-pagination-' + id}\n      variant={id}\n      onPerPageSelect={(_ev, perPage) => setPerPage(perPage)}\n    />\n  );\n\n  // Filtering\n  const [isDropdownOpen, setIsDropdownOpen] = React.useState(false);\n  const [filterColumn, setFilterColumn] = React.useState(isInternal ? columns[0] : columns[1]);\n  const [isSelectOpen, setIsSelectOpen] = React.useState(false);\n  const [statusSelections, setStatusSelections] = React.useState([]);\n  const [idFilter, setIdFilter] = React.useState('');\n  const [accountFilter, setAccountFilter] = React.useState('');\n  // For external view only\n  const [firstNameFilter, setFirstNameFilter] = React.useState('');\n  const [lastNameFilter, setLastNameFilter] = React.useState('');\n\n  // Row loading\n  const [isLoading, setIsLoading] = React.useState(true);\n  const [numRows, setNumRows] = React.useState(0);\n  const [rows, setRows] = React.useState([]);\n  const dispatch = useDispatch();\n  const fetchAccessRequests = () => {\n    setIsLoading(true);\n    const listUrl = new URL(`${window.location.origin}${API_BASE}/cross-account-requests/`);\n    if (isInternal) {\n      listUrl.searchParams.append('query_by', 'user_id');\n    }\n    listUrl.searchParams.append('offset', (page - 1) * perPage);\n    listUrl.searchParams.append('limit', perPage);\n    // Currently unsupported :(\n    if (firstNameFilter) {\n      listUrl.searchParams.append('first_name', firstNameFilter);\n    }\n    if (lastNameFilter) {\n      listUrl.searchParams.append('last_name', lastNameFilter);\n    }\n    if (idFilter) {\n      listUrl.searchParams.append('id', idFilter);\n    }\n    if (accountFilter) {\n      listUrl.searchParams.append('account_number', accountFilter);\n    }\n    if (statusSelections.length > 0) {\n      listUrl.searchParams.append('status', statusSelections.join(','));\n    }\n    // Currently unsupported :(\n    listUrl.searchParams.append('sort_by', columns[activeSortIndex].toLowerCase());\n    listUrl.searchParams.append('sort_direction', activeSortDirection);\n\n    fetch(listUrl.href)\n      .then(res => res.json())\n      .then(res => {\n        setNumRows(res.meta.count);\n        setRows(res.data.map(d => isInternal\n          ? [\n            d.request_id,\n            d.target_account,\n            d.start_date,\n            d.end_date,\n            d.created,\n            d.status\n          ]\n          : [\n            d.request_id,\n            d.first_name,\n            d.last_name,\n            d.start_date,\n            d.end_date,\n            d.created,\n            d.status\n          ]));\n        setIsLoading(false);\n      })\n      .catch(err => {\n        setIsLoading(false);\n        dispatch(addNotification({\n          variant: 'danger',\n          title: 'Could not list access requests',\n          description: err.message\n        }));\n      });\n  };\n  React.useEffect(() => { fetchAccessRequests() }, [\n    firstNameFilter,\n    lastNameFilter,\n    idFilter,\n    accountFilter,\n    statusSelections,\n    activeSortIndex,\n    activeSortDirection,\n    perPage,\n    page\n  ]);\n\n  // Modal actions\n  const [openModal, setOpenModal] = React.useState({ type: null });\n  const onModalClose = isChanged => {\n    setOpenModal({ type: null });\n    if (isChanged) {\n      fetchAccessRequests();\n    }\n  };\n  const modals = (\n    <React.Fragment>\n      {openModal.type === 'cancel' &&\n        <CancelRequestModal\n          requestId={openModal.requestId}\n          onClose={onModalClose}\n        />}\n      {['edit', 'create'].includes(openModal.type) &&\n        <EditRequestModal\n          variant={openModal.type}\n          requestId={openModal.requestId}\n          onClose={onModalClose}\n        />}\n    </React.Fragment>\n  );\n\n  // Rendering\n  const createButton = isInternal && (\n    <Button variant=\"primary\" onClick={() => setOpenModal({ type: 'create' })}>\n      Create request\n    </Button>\n  );\n  if (rows.length === 0) {\n    return (\n      <Bullseye style={{ height: 'auto' }} className=\"pf-u-mt-lg\">\n        {isLoading\n          ? <Spinner size=\"xl\" />\n          : <EmptyState variant=\"large\">\n              <EmptyStateIcon icon={PlusCircleIcon} />\n              <Title headingLevel=\"h3\" size=\"lg\">\n                {isInternal\n                  ? 'No access requests'\n                  : 'You have no access requests'}\n              </Title>\n              <EmptyStateBody>\n                {isInternal\n                  ? 'Click the button below to create an access request.'\n                  : 'You have no pending Red Hat access requests.'}\n              </EmptyStateBody>\n              {createButton}\n            </EmptyState>\n        }\n        {modals}\n      </Bullseye>\n    );\n  }\n\n  const selectLabelId = 'filter-status';\n  const selectPlaceholder = `Filter by ${uncapitalize(columns[columns.length - 1])}`;\n  const FilterTextForm = ({ colName, value, setValue }) => {\n    const [inputValue, setInputValue] = React.useState(value);\n    return (\n      <form\n        style={{ display: 'flex' }}\n        onSubmit={ev => {\n          ev.preventDefault();\n          setValue(inputValue);\n        }}\n      >\n        <TextInput\n          name={`${colName}-filter`}\n          id={`${colName}-filter`}\n          type=\"search\"\n          placeholder={`Filter by ${colName.toLowerCase()}`}\n          aria-label={`${colName} search input`}\n          value={inputValue}\n          onChange={val => setInputValue(val)}\n        />\n        <Button variant=\"control\" type=\"submit\" aria-label={`Search button for ${colName} filter`}>\n          <SearchIcon />\n        </Button>\n      </form>\n    );\n  }\n  const toolbar = (\n    <Toolbar id=\"access-requests-table-toolbar\">\n      <ToolbarContent>\n        <ToolbarItem>\n          <InputGroup>\n            <Dropdown\n              isOpen={isDropdownOpen}\n              onSelect={ev => { setIsDropdownOpen(false); setFilterColumn(ev.target.value); setIsSelectOpen(false); }}\n              toggle={\n                <DropdownToggle onToggle={isOpen => setIsDropdownOpen(isOpen)}>\n                  <FilterIcon /> {filterColumn}\n                </DropdownToggle>\n              }\n              // https://marvelapp.com/prototype/257je526/screen/74764732\n              dropdownItems={(isInternal ? [0, 1, 5] : [1, 2, 6]).map(i => columns[i]).map(colName =>\n                // Filterable columns are RequestID, AccountID, and Status\n                <DropdownItem key={colName} value={colName} component=\"button\">\n                  {capitalize(colName)}\n                </DropdownItem>\n              )}\n            />\n            {['Status', 'Decision'].includes(filterColumn) &&\n              <React.Fragment>\n                <span id={selectLabelId} hidden>{selectPlaceholder}</span>\n                <Select\n                  aria-labelledby={selectLabelId}\n                  variant=\"checkbox\"\n                  aria-label=\"Select statuses\"\n                  onToggle={isOpen => setIsSelectOpen(isOpen)}\n                  onSelect={(_ev, selection) => {\n                    if (statusSelections.includes(selection)) {\n                      setStatusSelections(statusSelections.filter(s => s !== selection));\n                    }\n                    else {\n                      setStatusSelections([...statusSelections, selection]);\n                    }\n                  }}\n                  isOpen={isSelectOpen}\n                  selections={Array.from(statusSelections)}\n                  isCheckboxSelectionBadgeHidden\n                  placeholderText={selectPlaceholder}\n                >\n                  {statuses.map(status =>\n                    <SelectOption key={status} value={status}>{capitalize(status)}</SelectOption>\n                  )}\n                </Select>\n              </React.Fragment>\n            }\n            {filterColumn === 'First name' &&\n              <FilterTextForm colName={filterColumn} value={firstNameFilter} setValue={setFirstNameFilter} />\n            }\n            {filterColumn === 'Last name' &&\n              <FilterTextForm colName={filterColumn} value={lastNameFilter} setValue={setLastNameFilter} />\n            }\n            {filterColumn === 'Request ID' &&\n              <FilterTextForm colName={filterColumn} value={idFilter} setValue={setIdFilter} />\n            }\n            {filterColumn === 'Account number' &&\n              <FilterTextForm colName={filterColumn} value={accountFilter} setValue={setAccountFilter} />\n            }\n          </InputGroup>\n        </ToolbarItem>\n        <ToolbarItem>\n          {createButton}\n        </ToolbarItem>\n        <ToolbarItem variant=\"pagination\" align={{ default: 'alignRight' }}>\n          <AccessRequestsPagination id=\"top\" />\n        </ToolbarItem>\n      </ToolbarContent>\n      <ToolbarContent>\n        <ChipGroup categoryName=\"Status\">\n          {statusSelections.map(status =>\n            <Chip key={status} onClick={() => setStatusSelections(statusSelections.filter(s => s !== status))}>\n              {status}\n            </Chip>\n          )}\n        </ChipGroup>\n        {firstNameFilter && \n          <ChipGroup categoryName=\"First name\">\n            <Chip onClick={() => setFirstNameFilter('')}>\n              {firstNameFilter}\n            </Chip>\n          </ChipGroup>\n        }\n        {lastNameFilter && \n          <ChipGroup categoryName=\"Last name\">\n            <Chip onClick={() => setLastNameFilter('')}>\n              {lastNameFilter}\n            </Chip>\n          </ChipGroup>\n        }\n        {idFilter && \n          <ChipGroup categoryName=\"Request ID\">\n            <Chip onClick={() => setIdFilter('')}>\n              {idFilter}\n            </Chip>\n          </ChipGroup>\n        }\n        {accountFilter &&\n          <ChipGroup categoryName=\"Account number\">\n            <Chip onClick={() => setAccountFilter('')}>\n              {accountFilter}\n            </Chip>\n          </ChipGroup>\n        }\n        {(statusSelections.length > 0 || idFilter || accountFilter) &&\n          <Button\n            variant=\"link\"\n            onClick={() => { setStatusSelections([]); setIdFilter(''); setAccountFilter(''); }}\n          >\n            Clear filters\n          </Button>}\n      </ToolbarContent>\n    </Toolbar>\n  );\n  function getColumnWidth(columnIndex) {\n    if (isInternal) {\n      return columnIndex === 0 ? 30 : 15;\n    }\n\n    return [0, 6].includes(columnIndex) ? 20 : 10;\n  }\n  const { url } = useRouteMatch();\n  const table = (\n    <TableComposable aria-label=\"Access requests table\" variant=\"compact\">\n      <Thead>\n        <Tr>\n          {columns.map((column, columnIndex) => \n            <Th\n              key={columnIndex}\n              sort={{ sortBy: { index: activeSortIndex, direction: activeSortDirection }, onSort, columnIndex }}\n              width={getColumnWidth(columnIndex)}\n            >\n              {column}\n            </Th>\n          )}\n          {isInternal && <Th />}\n        </Tr>\n      </Thead>\n      <Tbody>\n        {isLoading\n          ?\n            <Tr colSpan={6}>\n              <Bullseye>\n                <Spinner size=\"xl\" />\n              </Bullseye>\n            </Tr>\n          : rows.map((row, rowIndex) =>\n            <Tr key={rowIndex}>\n              <Td dataLabel={columns[0]}>\n                <Link to={`${url}${url.endsWith('/') ? '' : '/'}${row[0]}`}>{row[0]}</Link>\n              </Td>\n              <Td dataLabel={columns[1]}>\n                {row[1]}\n              </Td>\n              <Td dataLabel={columns[2]}>\n                {row[2]}\n              </Td>\n              <Td dataLabel={columns[3]}>\n                {row[3]}\n              </Td>\n              <Td dataLabel={columns[4]}>\n                {row[4]}\n              </Td>\n              {isInternal\n                ? <Td dataLabel={columns[5]}>\n                    <StatusLabel\n                      requestId={row[0]}\n                      status={row[5]}\n                      onLabelClick={() => setStatusSelections([...statusSelections.filter(s => s !== status), status])}\n                      hideActions\n                    />\n                  </Td>\n                : <Td dataLabel={columns[5]}>\n                    {row[5]}\n                  </Td>\n              }\n              {isInternal\n                // Different actions based on status\n                ? <Td actions={getInternalActions(row[5], row[0], setOpenModal)} />\n                : <Td dataLabel={columns[6]}>\n                    <StatusLabel\n                      requestId={row[0]}\n                      status={row[6]}\n                    />\n                  </Td>\n              }\n            </Tr>\n          )}\n      </Tbody>\n    </TableComposable>\n  );\n\n  return (\n    <React.Fragment>\n      {toolbar}\n      {table}\n      <AccessRequestsPagination id=\"bottom\" />\n      {modals}\n    </React.Fragment>\n  );\n};\n\nAccessRequestsTable.displayName = 'AccessRequestsTable';\n\nexport default AccessRequestsTable;\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { PageSection, Title } from '@patternfly/react-core';\nimport AccessRequestsTable from '../Components/AccessRequestsTable';\n\nconst AccessRequestsPage = ({ isInternal }) => {\n  return (\n    <React.Fragment>\n      <PageSection variant=\"light\">\n        <Title headingLevel=\"h1\" className=\"pf-u-pb-sm\">Access Requests</Title>\n        <p>Below is a list of all submitted requests for read only account access.</p>\n      </PageSection>\n      <PageSection padding={{ default: 'noPadding' }}>\n        <AccessRequestsTable isInternal={isInternal} />\n      </PageSection>\n    </React.Fragment>\n  );\n};\n\nexport default withRouter(AccessRequestsPage);\n"],"sourceRoot":""}