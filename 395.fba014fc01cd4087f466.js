(self.webpackChunk_redhat_cloud_services_access_requests_frontend=self.webpackChunk_redhat_cloud_services_access_requests_frontend||[]).push([[395],{777:(e,t,a)=>{"use strict";t.lb={name:"PlusCircleIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z",yOffset:0,xOffset:0},t.wl=a(5183).createIcon(t.lb),t.ZP=t.wl},2395:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var n=a(9661),r=a.n(n),c=a(7194),l=a(3004),s=a(7154),u=a.n(s),o=a(319),i=a.n(o),m=a(3038),d=a.n(m),p=a(6401),f=a(7733),E=a(2863),h=a(164),b=a(8794),g=a(8755),v=a(777),y=a(983),S=a(3215),C=a(2027);function T(e){return e[0].toLowerCase()+e.substring(1)}var q=["pending","approved","denied","cancelled","expired"],_=function(e){var t=e.isInternal,a=t?["Request ID","Account number","Start date","End date","Created","Status"]:["Request ID","First name","Last name","Start date","End date","Created","Decision"],n=r().useState(4),s=d()(n,2),o=s[0],m=s[1],_=r().useState("desc"),k=d()(_,2),I=k[0],P=k[1],w=function(e,t,a){m(t),P(a)},L=r().useState(1),D=d()(L,2),N=D[0],R=D[1],x=r().useState(10),A=d()(x,2),B=A[0],F=A[1],Z=function(e){var t=e.id;return r().createElement(l.Pagination,{itemCount:Ee,perPage:B,page:N,onSetPage:function(e,t){return R(t)},id:"access-requests-table-pagination-"+t,variant:t,onPerPageSelect:function(e,t){return F(t)}})},O=r().useState(!1),G=d()(O,2),z=G[0],V=G[1],j=r().useState(a[0]),H=d()(j,2),M=H[0],Y=H[1],U=r().useState(!1),W=d()(U,2),J=W[0],K=W[1],Q=r().useState([]),X=d()(Q,2),$=X[0],ee=X[1],te=r().useState(""),ae=d()(te,2),ne=ae[0],re=ae[1],ce=r().useState(""),le=d()(ce,2),se=le[0],ue=le[1],oe=r().useState(!0),ie=d()(oe,2),me=ie[0],de=ie[1],pe=r().useState(0),fe=d()(pe,2),Ee=fe[0],he=fe[1],be=r().useState([]),ge=d()(be,2),ve=ge[0],ye=ge[1],Se=(0,y.useDispatch)(),Ce=function(){de(!0);var e=new URL("".concat(window.location.origin).concat("/api/rbac/v1","/cross-account-requests/"));t&&e.searchParams.append("query_by","user_id"),e.searchParams.append("offset",(N-1)*B),e.searchParams.append("limit",B),ne&&e.searchParams.append("id",ne),se&&e.searchParams.append("account_number",se),$.length>0&&e.searchParams.append("status",$.join(",")),e.searchParams.append("sort_by",a[o].toLowerCase()),e.searchParams.append("sort_direction",I),fetch(e.href).then((function(e){return e.json()})).then((function(e){he(e.meta.count),ye(e.data.map((function(e){return t?[e.request_id,e.target_account,e.start_date,e.end_date,e.created,e.status]:[e.request_id,e.first_name,e.last_name,e.start_date,e.end_date,e.created,e.status]}))),de(!1)})).catch((function(e){de(!1),Se((0,S.wN)({variant:"danger",title:"Could not list access requests",description:e.message}))}))};r().useEffect((function(){Ce()}),[ne,se,$,o,I,B,N]);var Te=r().useState({type:null}),qe=d()(Te,2),_e=qe[0],ke=qe[1],Ie=function(e){ke({type:null}),e&&Ce()},Pe=r().createElement(r().Fragment,null,"cancel"===_e.type&&r().createElement(f.Z,{requestId:_e.requestId,onClose:Ie}),["edit","create"].includes(_e.type)&&r().createElement(E.Z,{variant:_e.type,requestId:_e.requestId,onClose:Ie})),we=t&&r().createElement(l.Button,{variant:"primary",onClick:function(){return ke({type:"create"})}},"Create request");if(0===ve.length&&!me)return r().createElement(l.Bullseye,{style:{height:"auto"},className:"pf-u-mt-lg"},r().createElement(l.EmptyState,{variant:"large"},r().createElement(l.EmptyStateIcon,{icon:v.ZP}),r().createElement(l.Title,{headingLevel:"h3",size:"lg"},t?"No access requests":"You have no access requests"),r().createElement(l.EmptyStateBody,null,t?"Click the button below to create an access request.":"You have no pending Red Hat access requests."),we),Pe);var Le="filter-status",De="Filter by ".concat(T(a[a.length-1])),Ne=function(e){var t=e.colName,a=e.value,n=e.setValue,c=r().useState(a),s=d()(c,2),u=s[0],o=s[1];return r().createElement("form",{style:{display:"flex"},onSubmit:function(e){e.preventDefault(),n(u)}},r().createElement(l.TextInput,{name:"".concat(t,"-filter"),id:"".concat(t,"-filter"),type:"search",placeholder:"Filter by ".concat(T(t)),"aria-label":"".concat(t," search input"),value:u,onChange:function(e){return o(e)}}),r().createElement(l.Button,{variant:"control",type:"submit","aria-label":"Search button for ".concat(t," filter")},r().createElement(b.ZP,null)))},Re=r().createElement(l.Toolbar,{id:"access-requests-table-toolbar"},r().createElement(l.ToolbarContent,null,r().createElement(l.ToolbarItem,null,r().createElement(l.InputGroup,null,r().createElement(l.Dropdown,{isOpen:z,onSelect:function(e){V(!1),Y(e.target.value),K(!1)},toggle:r().createElement(l.DropdownToggle,{onToggle:function(e){return V(e)}},r().createElement(g.ZP,null)," ",M),dropdownItems:(t?[0,1,5]:[0,6]).map((function(e){return a[e]})).map((function(e){return r().createElement(l.DropdownItem,{key:e,value:e,component:"button"},(0,h.kC)(e))}))}),["Status","Decision"].includes(M)&&r().createElement(r().Fragment,null,r().createElement("span",{id:Le,hidden:!0},De),r().createElement(l.Select,{"aria-labelledby":Le,variant:"checkbox","aria-label":"Select statuses",onToggle:function(e){return K(e)},onSelect:function(e,t){$.includes(t)?ee($.filter((function(e){return e!==t}))):ee([].concat(i()($),[t]))},isOpen:J,selections:Array.from($),isCheckboxSelectionBadgeHidden:!0,placeholderText:De},q.map((function(e){return r().createElement(l.SelectOption,{key:e,value:e},(0,h.kC)(e))})))),"Request ID"===M&&r().createElement(Ne,{colName:M,value:ne,setValue:re}),"Account number"===M&&r().createElement(Ne,{colName:M,value:se,setValue:ue}))),r().createElement(l.ToolbarItem,null,we),r().createElement(l.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},r().createElement(Z,{id:"top"}))),r().createElement(l.ToolbarContent,null,r().createElement(l.ChipGroup,{categoryName:"Status"},$.map((function(e){return r().createElement(l.Chip,{key:e,onClick:function(){return ee($.filter((function(t){return t!==e})))}},e)}))),ne&&r().createElement(l.ChipGroup,{categoryName:"Request ID"},r().createElement(l.Chip,{onClick:function(){return re("")}},ne)),se&&r().createElement(l.ChipGroup,{categoryName:"Account number"},r().createElement(l.Chip,{onClick:function(){return ue("")}},se)),($.length>0||ne||se)&&r().createElement(l.Button,{variant:"link",onClick:function(){ee([]),re(""),ue("")}},"Clear filters")));function xe(e){return t?0===e?30:15:[0,6].includes(e)?20:10}var Ae=(0,c.useRouteMatch)().url,Be=r().createElement(p.TableComposable,{"aria-label":"Access requests table",variant:"compact"},r().createElement(p.Thead,null,r().createElement(p.Tr,null,a.map((function(e,t){return r().createElement(p.Th,u()({key:t},!e.includes("name")&&{sort:{sortBy:{index:o,direction:I},onSort:w,columnIndex:t}},{width:xe(t)}),e)})),t&&r().createElement(p.Th,null))),r().createElement(p.Tbody,null,me?i()(Array(ve.length||B).keys()).map((function(e){return r().createElement(p.Tr,{key:e},a.map((function(e,t){return r().createElement(p.Td,{key:t,dataLabel:e},r().createElement("div",{style:{height:"30px"},class:"ins-c-skeleton ins-c-skeleton__md"}," "))})))})):ve.map((function(e,n){return r().createElement(p.Tr,{key:n},r().createElement(p.Td,{dataLabel:a[0]},r().createElement(c.Link,{to:"".concat(Ae).concat(Ae.endsWith("/")?"":"/").concat(e[0])},e[0])),r().createElement(p.Td,{dataLabel:a[1]},e[1]),r().createElement(p.Td,{dataLabel:a[2]},e[2]),r().createElement(p.Td,{dataLabel:a[3]},e[3]),r().createElement(p.Td,{dataLabel:a[4]},e[4]),t?r().createElement(p.Td,{dataLabel:a[5]},r().createElement(C.p,{requestId:e[0],status:e[5],onLabelClick:function(){return ee([].concat(i()($.filter((function(e){return e!==status}))),[status]))},hideActions:!0})):r().createElement(p.Td,{dataLabel:a[5]},e[5]),t?r().createElement(p.Td,{actions:(0,C.m)(e[5],e[0],ke)}):r().createElement(p.Td,{dataLabel:a[6]},r().createElement(C.p,{requestId:e[0],status:e[6]})))}))));return r().createElement(r().Fragment,null,Re,Be,r().createElement(Z,{id:"bottom"}),Pe)};_.displayName="AccessRequestsTable";const k=_,I=(0,c.withRouter)((function(e){var t=e.isInternal;return r().createElement(r().Fragment,null,r().createElement(l.PageSection,{variant:"light"},r().createElement(l.Title,{headingLevel:"h1",className:"pf-u-pb-sm"},"Access Requests"),r().createElement("p",null,"Below is a list of all submitted requests for read only account access.")),r().createElement(l.PageSection,{padding:{default:"noPadding"}},r().createElement(k,{isInternal:t})))}))}}]);
//# sourceMappingURL=395.fba014fc01cd4087f466.js.map