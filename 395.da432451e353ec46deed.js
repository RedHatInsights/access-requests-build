(self.webpackChunk_redhat_cloud_services_access_requests_frontend=self.webpackChunk_redhat_cloud_services_access_requests_frontend||[]).push([[395],{777:(e,t,a)=>{"use strict";t.lb={name:"PlusCircleIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z",yOffset:0,xOffset:0},t.wl=a(5183).createIcon(t.lb),t.ZP=t.wl},2395:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var n=a(9661),r=a.n(n),c=a(7194),l=a(3004),s=a(7154),u=a.n(s),o=a(319),i=a.n(o),m=a(3038),d=a.n(m),p=a(6401),E=a(7733),f=a(2863),h=a(164),g=a(8794),b=a(8755),v=a(777),y=a(983),C=a(3215),S=a(2027),T=["pending","approved","denied","cancelled","expired"],_=function(e){var t=e.isInternal,a=t?["Request ID","Account number","Start date","End date","Created","Status"]:["Request ID","First name","Last name","Start date","End date","Created","Decision"],n=r().useState(4),s=d()(n,2),o=s[0],m=s[1],_=r().useState("desc"),k=d()(_,2),q=k[0],I=k[1],P=function(e,t,a){m(t),I(a)},w=r().useState(1),L=d()(w,2),N=L[0],D=L[1],R=r().useState(10),x=d()(R,2),A=x[0],F=x[1],B=function(e){var t=e.id;return r().createElement(l.Pagination,{itemCount:Se,perPage:A,page:N,onSetPage:function(e,t){return D(t)},id:"access-requests-table-pagination-"+t,variant:t,onPerPageSelect:function(e,t){return F(t)}})},G=r().useState(!1),Z=d()(G,2),O=Z[0],V=Z[1],z=r().useState(t?a[0]:a[1]),j=d()(z,2),H=j[0],M=j[1],Y=r().useState(!1),U=d()(Y,2),W=U[0],J=U[1],K=r().useState([]),Q=d()(K,2),X=Q[0],$=Q[1],ee=r().useState(""),te=d()(ee,2),ae=te[0],ne=te[1],re=r().useState(""),ce=d()(re,2),le=ce[0],se=ce[1],ue=r().useState(""),oe=d()(ue,2),ie=oe[0],me=oe[1],de=r().useState(""),pe=d()(de,2),Ee=pe[0],fe=pe[1],he=r().useState(!0),ge=d()(he,2),be=ge[0],ve=ge[1],ye=r().useState(0),Ce=d()(ye,2),Se=Ce[0],Te=Ce[1],_e=r().useState([]),ke=d()(_e,2),qe=ke[0],Ie=ke[1],Pe=(0,y.useDispatch)(),we=function(){ve(!0);var e=new URL("".concat(window.location.origin).concat("/api/rbac/v1","/cross-account-requests/"));t&&e.searchParams.append("query_by","user_id"),e.searchParams.append("offset",(N-1)*A),e.searchParams.append("limit",A),ie&&e.searchParams.append("first_name",ie),Ee&&e.searchParams.append("last_name",Ee),ae&&e.searchParams.append("id",ae),le&&e.searchParams.append("account_number",le),X.length>0&&e.searchParams.append("status",X.join(",")),e.searchParams.append("sort_by",a[o].toLowerCase()),e.searchParams.append("sort_direction",q),fetch(e.href).then((function(e){return e.json()})).then((function(e){Te(e.meta.count),Ie(e.data.map((function(e){return t?[e.request_id,e.target_account,e.start_date,e.end_date,e.created,e.status]:[e.request_id,e.first_name,e.last_name,e.start_date,e.end_date,e.created,e.status]}))),ve(!1)})).catch((function(e){ve(!1),Pe((0,C.wN)({variant:"danger",title:"Could not list access requests",description:e.message}))}))};r().useEffect((function(){we()}),[ie,Ee,ae,le,X,o,q,A,N]);var Le=r().useState({type:null}),Ne=d()(Le,2),De=Ne[0],Re=Ne[1],xe=function(e){Re({type:null}),e&&we()},Ae=r().createElement(r().Fragment,null,"cancel"===De.type&&r().createElement(E.Z,{requestId:De.requestId,onClose:xe}),["edit","create"].includes(De.type)&&r().createElement(f.Z,{variant:De.type,requestId:De.requestId,onClose:xe})),Fe=t&&r().createElement(l.Button,{variant:"primary",onClick:function(){return Re({type:"create"})}},"Create request");if(0===qe.length&&!be)return r().createElement(l.Bullseye,{style:{height:"auto"},className:"pf-u-mt-lg"},r().createElement(l.EmptyState,{variant:"large"},r().createElement(l.EmptyStateIcon,{icon:v.ZP}),r().createElement(l.Title,{headingLevel:"h3",size:"lg"},t?"No access requests":"You have no access requests"),r().createElement(l.EmptyStateBody,null,t?"Click the button below to create an access request.":"You have no pending Red Hat access requests."),Fe),Ae);var Be,Ge="filter-status",Ze="Filter by ".concat((Be=a[a.length-1])[0].toLowerCase()+Be.substring(1)),Oe=function(e){var t=e.colName,a=e.value,n=e.setValue,c=r().useState(a),s=d()(c,2),u=s[0],o=s[1];return r().createElement("form",{style:{display:"flex"},onSubmit:function(e){e.preventDefault(),n(u)}},r().createElement(l.TextInput,{name:"".concat(t,"-filter"),id:"".concat(t,"-filter"),type:"search",placeholder:"Filter by ".concat(t.toLowerCase()),"aria-label":"".concat(t," search input"),value:u,onChange:function(e){return o(e)}}),r().createElement(l.Button,{variant:"control",type:"submit","aria-label":"Search button for ".concat(t," filter")},r().createElement(g.ZP,null)))},Ve=r().createElement(l.Toolbar,{id:"access-requests-table-toolbar"},r().createElement(l.ToolbarContent,null,r().createElement(l.ToolbarItem,null,r().createElement(l.InputGroup,null,r().createElement(l.Dropdown,{isOpen:O,onSelect:function(e){V(!1),M(e.target.value),J(!1)},toggle:r().createElement(l.DropdownToggle,{onToggle:function(e){return V(e)}},r().createElement(b.ZP,null)," ",H),dropdownItems:(t?[0,1,5]:[1,2,6]).map((function(e){return a[e]})).map((function(e){return r().createElement(l.DropdownItem,{key:e,value:e,component:"button"},(0,h.kC)(e))}))}),["Status","Decision"].includes(H)&&r().createElement(r().Fragment,null,r().createElement("span",{id:Ge,hidden:!0},Ze),r().createElement(l.Select,{"aria-labelledby":Ge,variant:"checkbox","aria-label":"Select statuses",onToggle:function(e){return J(e)},onSelect:function(e,t){X.includes(t)?$(X.filter((function(e){return e!==t}))):$([].concat(i()(X),[t]))},isOpen:W,selections:Array.from(X),isCheckboxSelectionBadgeHidden:!0,placeholderText:Ze},T.map((function(e){return r().createElement(l.SelectOption,{key:e,value:e},(0,h.kC)(e))})))),"First name"===H&&r().createElement(Oe,{colName:H,value:ie,setValue:me}),"Last name"===H&&r().createElement(Oe,{colName:H,value:Ee,setValue:fe}),"Request ID"===H&&r().createElement(Oe,{colName:H,value:ae,setValue:ne}),"Account number"===H&&r().createElement(Oe,{colName:H,value:le,setValue:se}))),r().createElement(l.ToolbarItem,null,Fe),r().createElement(l.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},r().createElement(B,{id:"top"}))),r().createElement(l.ToolbarContent,null,r().createElement(l.ChipGroup,{categoryName:"Status"},X.map((function(e){return r().createElement(l.Chip,{key:e,onClick:function(){return $(X.filter((function(t){return t!==e})))}},e)}))),ie&&r().createElement(l.ChipGroup,{categoryName:"First name"},r().createElement(l.Chip,{onClick:function(){return me("")}},ie)),Ee&&r().createElement(l.ChipGroup,{categoryName:"Last name"},r().createElement(l.Chip,{onClick:function(){return fe("")}},Ee)),ae&&r().createElement(l.ChipGroup,{categoryName:"Request ID"},r().createElement(l.Chip,{onClick:function(){return ne("")}},ae)),le&&r().createElement(l.ChipGroup,{categoryName:"Account number"},r().createElement(l.Chip,{onClick:function(){return se("")}},le)),(X.length>0||ae||le)&&r().createElement(l.Button,{variant:"link",onClick:function(){$([]),ne(""),se("")}},"Clear filters")));function ze(e){return t?0===e?30:15:[0,6].includes(e)?20:10}var je=(0,c.useRouteMatch)().url,He=r().createElement(p.TableComposable,{"aria-label":"Access requests table",variant:"compact"},r().createElement(p.Thead,null,r().createElement(p.Tr,null,a.map((function(e,t){return r().createElement(p.Th,u()({key:t},!e.includes("name")&&{sort:{sortBy:{index:o,direction:q},onSort:P,columnIndex:t}},{width:ze(t)}),e)})),t&&r().createElement(p.Th,null))),r().createElement(p.Tbody,null,be?i()(Array(qe.length||A).keys()).map((function(e){return r().createElement(p.Tr,{key:e},a.map((function(e,t){return r().createElement(p.Td,{key:t,dataLabel:e},r().createElement("div",{style:{height:"30px"},class:"ins-c-skeleton ins-c-skeleton__md"}," "))})))})):qe.map((function(e,n){return r().createElement(p.Tr,{key:n},r().createElement(p.Td,{dataLabel:a[0]},r().createElement(c.Link,{to:"".concat(je).concat(je.endsWith("/")?"":"/").concat(e[0])},e[0])),r().createElement(p.Td,{dataLabel:a[1]},e[1]),r().createElement(p.Td,{dataLabel:a[2]},e[2]),r().createElement(p.Td,{dataLabel:a[3]},e[3]),r().createElement(p.Td,{dataLabel:a[4]},e[4]),t?r().createElement(p.Td,{dataLabel:a[5]},r().createElement(S.p,{requestId:e[0],status:e[5],onLabelClick:function(){return $([].concat(i()(X.filter((function(e){return e!==status}))),[status]))},hideActions:!0})):r().createElement(p.Td,{dataLabel:a[5]},e[5]),t?r().createElement(p.Td,{actions:(0,S.m)(e[5],e[0],Re)}):r().createElement(p.Td,{dataLabel:a[6]},r().createElement(S.p,{requestId:e[0],status:e[6]})))}))));return r().createElement(r().Fragment,null,Ve,He,r().createElement(B,{id:"bottom"}),Ae)};_.displayName="AccessRequestsTable";const k=_,q=(0,c.withRouter)((function(e){var t=e.isInternal;return r().createElement(r().Fragment,null,r().createElement(l.PageSection,{variant:"light"},r().createElement(l.Title,{headingLevel:"h1",className:"pf-u-pb-sm"},"Access Requests"),r().createElement("p",null,"Below is a list of all submitted requests for read only account access.")),r().createElement(l.PageSection,{padding:{default:"noPadding"}},r().createElement(k,{isInternal:t})))}))}}]);
//# sourceMappingURL=395.da432451e353ec46deed.js.map