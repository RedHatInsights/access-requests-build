(self.webpackChunk_redhat_cloud_services_access_requests_frontend=self.webpackChunk_redhat_cloud_services_access_requests_frontend||[]).push([[773],{17733:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(70885),r=n(92950),l=n.n(r),c=n(56976),o=n(51352),i=n(83215),s=n(45697),u=n.n(s),d=n(24874),m=function(e){var t=e.requestId,n=e.onClose,r=l().useState(!1),s=(0,a.Z)(r,2),u=s[0],m=s[1],p=(0,o.I0)();return l().createElement(c.Modal,{title:"Cancel request?",isOpen:!0,variant:"small",onClose:function(){return n(!1)},actions:[l().createElement(c.Button,{key:"confirm",variant:"danger",onClick:function(){m(!0),d.Z.patch("".concat("/api/rbac/v1","/cross-account-requests/").concat(t,"/"),{status:"cancelled"},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){if(e.errors&&e.errors.length>0)throw Error(e.errors.map((function(e){return e.detail})).join("\n"));p((0,i.wN)({variant:"success",title:"Request cancelled successfully"})),m(!1),n(!0)})).catch((function(e){p((0,i.wN)({variant:"danger",title:"There was an error cancelling your request",description:e.message})),m(!1),n(!0)}))}},"Yes, cancel"),l().createElement(c.Button,{key:"cancel",variant:"link",onClick:function(){return n(!1)}},"No, keep")]},"Request ",l().createElement("b",null,t)," will be withdrawn.",u&&l().createElement(c.Spinner,{size:"lg"}))};m.propTypes={requestId:u().string,onClose:u().func};const p=m},42863:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var a=n(70885),r=n(92950),l=n.n(r),c=n(56976),o=n(34046),i=n(84564),s=n(80164),u=n(24432),d=n(51352),m=n(83215),p=n(31643),E=n(45697),f=n.n(E),g=n(24874),y="Customers will be able to see this information as part of your request",h={"first name":y,"last name":y,"account number":"This is the account number that you would like to receive read access to","access duration":"This is the time frame you would like to be granted read access to accounts"},b="Invalid Account number",v=function(e){return l().createElement(c.Popover,{bodyContent:l().createElement("p",null,h[e])},l().createElement("button",{type:"button","aria-label":"More info for ".concat(e),onClick:function(e){return e.preventDefault()},"aria-describedby":"form-name",className:"pf-c-form__group-label-help"},l().createElement(o.ZP,{noVerticalAlign:!0})))},S=new Date;S.setDate(S.getDate()-1);var T=new Date;T.setDate(T.getDate()+60);var C=function(e){return e.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})},k=function(e){var t=e.split("/");if(3!==t.length)return new Date;var n=t[0].padStart(2,"0"),a=t[1].padStart(2,"0"),r=t[2].padStart(4,"0");return new Date("".concat(r,"-").concat(n,"-").concat(a,"T00:00:00"))},w=function(e){var t=e.user,n=void 0===t?{}:t,r=e.targetAccount,o=e.setTargetAccount,i=e.start,s=e.setStart,d=e.end,m=e.setEnd,p=e.disableAccount,E=e.isLoading,f=e.error,g=l().useState(),y=(0,a.Z)(g,2),h=y[0],b=y[1],w=l().useState(f?"error":"default"),Z=(0,a.Z)(w,2),x=Z[0],I=Z[1],_=function(e){if((0,u.qb)(e)){if(e<S)return m(""),"Start date must be today or later";if(e>T)return m(""),"Start date must be within 60 days of today"}return""},q=function(e){if((0,u.qb)(h)&&h>e)return"End date must be after from date";var t=new Date(h);return t.setFullYear(t.getFullYear()+1),e>t?"Access duration may not be longer than one year":""};return l().createElement(c.Form,{onSubmit:function(e){return e.preventDefault()},isDisabled:E},l().createElement(c.Title,{headingLevel:"h2"},"Request details"),l().createElement(c.Split,{hasGutter:!0},l().createElement(c.SplitItem,{isFilled:!0},l().createElement(c.FormGroup,{label:"First name",labelIcon:v("first name")},l().createElement(c.TextInput,{id:"first-name",value:n.first_name,isDisabled:!0}))),l().createElement(c.SplitItem,{isFilled:!0},l().createElement(c.FormGroup,{label:"Last name",labelIcon:v("last name")},l().createElement(c.TextInput,{id:"last-name",value:n.last_name,isDisabled:!0})))),l().createElement(c.FormGroup,{label:"Account number",isRequired:!0,labelIcon:v("account number"),helperText:"Enter the account number you would like access to",helperTextInvalid:"Please enter a valid account number",validated:x},l().createElement(c.TextInput,{id:"account-number",value:r,onChange:function(e){o(e),I("default")},isRequired:!0,placeholder:"Example, 8675309",validated:x,isDisabled:p})),l().createElement(c.FormGroup,{label:"Access duration",isRequired:!0,labelIcon:v("access duration")},l().createElement(c.Split,null,l().createElement(c.SplitItem,null,l().createElement(c.DatePicker,{width:"300px","aria-label":"Start date",value:i,dateFormat:C,dateParse:k,placeholder:"mm/dd/yyyy",onChange:function(e,t){b(new Date(t)),s(e),(0,u.qb)(t)&&!_(t)?(t.setDate(t.getDate()+7),m(C(t))):m("")},validators:[_]})),l().createElement(c.SplitItem,{style:{padding:"6px 12px 0 12px"}},"to"),l().createElement(c.SplitItem,null,l().createElement(c.DatePicker,{width:"300px","aria-label":"End date",value:d,dateFormat:C,dateParse:k,placeholder:"mm/dd/yyyy",onChange:function(e,t){q(t)?m(""):m(e)},validators:[q],rangeStart:i})))))};w.propTypes={user:f().any,targetAccount:f().any,setTargetAccount:f().any,start:f().any,setStart:f().any,end:f().any,setEnd:f().any,disableAccount:f().any,isLoading:f().any,error:f().any};var Z={paddingBottom:"16px"},x=function(e){var t=e.targetAccount,n=e.start,a=e.end,r=e.roles,o=e.isLoading,s=e.error,u=e.onClose,d=null;if(o)d=l().createElement(c.EmptyState,null,l().createElement(c.EmptyStateIcon,{icon:function(){return l().createElement(c.Spinner,{size:"lg"})}}),l().createElement(c.Title,{headingLevel:"h2",size:"lg"},"Submitting access request"),l().createElement(c.Button,{variant:"link",onClick:u},"Close"));else if(s){var m=l().useContext(c.WizardContextConsumer);d=l().createElement(c.EmptyState,null,l().createElement(c.EmptyStateIcon,{icon:i.ZP,color:"#C9190B"}),l().createElement(c.Title,{headingLevel:"h2",size:"lg"},s.title),l().createElement(c.EmptyStateBody,null,s.description),s.title===b&&l().createElement(c.Button,{variant:"primary",onClick:function(){return m.goToStepById(1)}},"Return to Step 1"))}else d=l().createElement(l().Fragment,null,l().createElement(c.Title,{headingLevel:"h2",style:Z},"Review details"),l().createElement("table",null,l().createElement("tr",null,l().createElement("td",{style:Z},l().createElement("b",null,"Account number")),l().createElement("td",{style:Z},t)),l().createElement("tr",null,l().createElement("td",{style:{paddingRight:"32px"}},l().createElement("b",null,"Access duration")),l().createElement("td",null)),l().createElement("tr",null,l().createElement("td",null,"From"),l().createElement("td",null,n)),l().createElement("tr",null,l().createElement("td",{style:Z},"To"),l().createElement("td",{style:Z},a)),l().createElement("tr",null,l().createElement("td",null,l().createElement("b",null,"Roles")),l().createElement("td",null,r[0])),r.slice(1).map((function(e){return l().createElement("tr",{key:e},l().createElement("td",null),l().createElement("td",null,e))}))));return l().createElement(l().Fragment,null,d)};x.propTypes={targetAccount:f().any,start:f().any,end:f().any,roles:f().any,isLoading:f().any,error:f().any,onClose:f().any};var I=function(e){var t=e.requestId,n=e.variant,r=e.onClose,o="edit"===n,i=l().useState(!0),u=(0,a.Z)(i,2),E=u[0],f=u[1],y=l().useState(),h=(0,a.Z)(y,2),v=h[0],S=h[1],T=l().useState(),C=(0,a.Z)(T,2),k=C[0],Z=C[1],I=l().useState(),_=(0,a.Z)(I,2),q=_[0],A=_[1],D=l().useState(),N=(0,a.Z)(D,2),B=N[0],F=N[1],P=l().useState(),L=(0,a.Z)(P,2),R=L[0],j=L[1],G=l().useState([]),O=(0,a.Z)(G,2),z=O[0],M=O[1],Y=l().useState(!1),H=(0,a.Z)(Y,2),V=H[0],W=H[1],J=l().useState(1),Q=(0,a.Z)(J,2),U=Q[0],K=Q[1],X=(0,d.I0)(),$=Boolean(q||B||R||z.length>0);l().useEffect((function(){var e=window.insights.chrome.auth.getUser(),n=o?g.Z.get("".concat("/api/rbac/v1","/cross-account-requests/").concat(t,"/"),{headers:{Accept:"application/json"}}):new Promise((function(e){return e(!0)}));Promise.all([e,n]).then((function(e){var n=(0,a.Z)(e,2),r=n[0],l=n[1];if(!(r&&r.identity&&r.identity.user))throw Error("Couldn't get current user. Make sure you're logged in");if(Z(r.identity.user),o){if(l.errors)throw Error(l.errors.map((function(e){return e.detail})).join("\n"));if(!l||!l.target_account)throw Error("Could not fetch details for request ".concat(t));A(l.target_account),F(l.start_date),j(l.end_date),M(l.roles.map((function(e){return e.display_name})))}f(!1)})).catch((function(e){X((0,m.wN)({variant:"danger",title:"Could not load access request",description:e.message}))}))}),[]);var ee=[q,B,R].every(Boolean),te=z.length>0,ne=[{id:1,name:"Request details",component:l().createElement(w,{user:k,targetAccount:q,setTargetAccount:A,start:B,setStart:F,end:R,setEnd:j,disableAccount:o,isLoading:E,error:v}),enableNext:ee},{id:2,name:"Select roles",component:l().createElement(p.Z,{roles:z,setRoles:M}),enableNext:te,canJumpTo:ee},{id:3,name:"Review details",component:l().createElement(x,{targetAccount:q,start:B,end:R,roles:z,isLoading:E,error:v,setError:S,onClose:function(){return r(!1)}}),canJumpTo:ee&&te,enableNext:!E,nextButtonText:"Finish"}],ae="".concat(n,"-request"),re="".concat(n," request");return l().createElement(l().Fragment,null,l().createElement(c.Modal,{variant:"large",style:{height:"900px"},showClose:!1,hasNoBodyWrapper:!0,isOpen:!V,"aria-describedby":re,"aria-labelledby":ae},l().createElement(c.Wizard,{titleId:ae,descriptionId:re,title:(0,s.kC)(n)+" request",steps:ne,onClose:function(){return $?W(!0):r(!1)},onSave:function(){f(!0);var e={target_account:q,start_date:B,end_date:R,roles:z};g.Z[o?"put":"post"]("".concat("/api/rbac/v1","/cross-account-requests/").concat(o?"/".concat(t,"/"):""),e,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){if(e.errors&&e.errors.length>0)throw Error(e.errors[0].detail);X((0,m.wN)({variant:"success",title:"".concat(o?"Edited":"Created"," access request"),description:e.request_id})),r(!0)})).catch((function(e){var t=/Account .* does not exist/.test(e.message);S({title:t?b:"Could not ".concat(n," access request"),description:t?"Please return to Step 1: Request details and input a new account number for your request.":e.message}),f(!1)}))},startAtStep:U,onNext:function(e){var t=e.id;S(),K(t)},onBack:function(e){var t=e.id;S(),K(t)},onGoToStep:function(e){var t=e.id;S(),K(t)}})),V&&l().createElement(c.Modal,{title:"Exit request creation?",variant:"small",titleIconVariant:"warning",isOpen:!0,onClose:function(){return W(!1)},actions:[l().createElement(c.Button,{key:"confirm",variant:"primary",onClick:function(){return r(!1)}},"Exit"),l().createElement(c.Button,{key:"cancel",variant:"link",onClick:function(){return W(!1)}},"Stay")]},"All inputs will be discarded."))};I.propTypes={requestId:f().string,variant:f().any,onClose:f().func};const _=I},31643:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var a=n(42982),r=n(70885),l=n(92950),c=n.n(l),o=n(56976),i=n(98975),s=n(8755),u=n(48794),d=n(80164),m=n(38296),p=n(51352),E=n(83215),f=n(45697),g=n.n(f),y=n(24874),h=[],b=[],v=function(e){var t=e.roles,n=e.setRoles,l=void 0===n,f=["Role name","Role description","Permissions"],v=c().useState(Array.from(h)),S=(0,r.Z)(v,2),T=S[0],C=S[1],k=c().useState(b),w=(0,r.Z)(k,2),Z=w[0],x=w[1];c().useEffect((function(){0!==h.length&&0!==b.length||y.Z.get("".concat("/api/rbac/v1","/roles/?limit=9999&order_by=display_name&add_fields=groups_in_count"),{headers:{Accept:"application/json"}}).then((function(e){var t=e.data;t.forEach((function(e){e.isExpanded=!1,e.permissions=e.accessCount})),h=t.map((function(e){return Object.assign({},e)})),C(t);var n=Array.from(t.map((function(e){return e.applications})).flat().reduce((function(e,t){return e.add(t),e}),new Set)).sort();b=n,x(n)})).catch((function(e){return qe((0,E.wN)({variant:"danger",title:"Could not fetch roles list",description:e.message}))}))}),[]);var I=c().useState("name"),_=(0,r.Z)(I,2),q=_[0],A=_[1],D=c().useState("asc"),N=(0,r.Z)(D,2),B=N[0],F=N[1],P=function(e,t,n){A(t),F(n)},L=c().useState(!1),R=(0,r.Z)(L,2),j=R[0],G=R[1],O=c().useState(f[0]),z=(0,r.Z)(O,2),M=z[0],Y=z[1],H=c().useState(!1),V=(0,r.Z)(H,2),W=V[0],J=V[1],Q=c().useState([]),U=(0,r.Z)(Q,2),K=U[0],X=U[1],$=c().useState(""),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],ae=K.length>0||te,re="filter-application",le="Filter by application",ce=t.map((function(e){return e.display_name})),oe=T.filter((function(e){return!(K.length>0)||e.applications.find((function(e){return K.includes(e)}))})).filter((function(e){return e.name.toLowerCase().includes(te)})).filter((function(e){return!l||ce.includes(e.display_name)})),ie=c().useState(1),se=(0,r.Z)(ie,2),ue=se[0],de=se[1],me=c().useState(10),pe=(0,r.Z)(me,2),Ee=pe[0],fe=pe[1],ge=function(e){var t=e.id;return c().createElement(o.Pagination,{itemCount:oe.length,perPage:Ee,page:ue,onSetPage:function(e,t){return de(t)},id:"access-requests-roles-table-pagination-"+t,variant:t,onPerPageSelect:function(e,t){de(1),fe(t)},isCompact:"top"===t})};ge.propTypes={id:g().string};var ye=oe.sort((function(e,t){return"number"==typeof e[q]?"asc"===B?e[q]-t[q]:t[q]-e[q]:"asc"===B?(e[q]+"").localeCompare(t[q]):(t[q]+"").localeCompare(e[q])})).slice((ue-1)*Ee,ue*Ee),he=c().useState(!1),be=(0,r.Z)(he,2),ve=be[0],Se=be[1],Te=t.length>0,Ce=!!Te&&null,ke=t.length===oe.length&&t.length>0||Ce,we=function(e,a,r){var l=ye[r].display_name;n(a?t.concat(l):t.filter((function(e){return e!==l})))},Ze=function(e,t){n(t?oe.map((function(e){return e.display_name})):[])},xe=c().createElement(o.Button,{variant:"link",onClick:function(){X([]),ne("")}},"Clear filters"),Ie=l?null:c().createElement(o.Toolbar,{id:"access-requests-roles-table-toolbar"},c().createElement(o.ToolbarContent,null,c().createElement(o.ToolbarItem,null,c().createElement(o.Dropdown,{onSelect:function(){return Se(!ve)},position:"left",toggle:c().createElement(o.DropdownToggle,{splitButtonItems:[c().createElement(o.DropdownToggleCheckbox,{key:"a",id:"example-checkbox-2","aria-label":Te?"Deselect all":"Select all",isChecked:ke,onClick:function(){return Ze(0,!Te)}})],onToggle:function(e){return Se(e)},isDisabled:0===T.length},0!==t.length&&c().createElement(c().Fragment,null,t.length," selected")),isOpen:ve,dropdownItems:[c().createElement(o.DropdownItem,{key:"0",onClick:function(){return Ze(0,!1)}},"Select none (0 items)"),c().createElement(o.DropdownItem,{key:"1",onClick:function(){return n(t.concat(ye.map((function(e){return e.display_name}))))}},"Select page (",Math.min(ye.length,Ee)," items)"),c().createElement(o.DropdownItem,{key:"2",onClick:function(){return Ze(0,!0)}},"Select all (",oe.length," items)")]})),c().createElement(o.ToolbarItem,null,c().createElement(o.InputGroup,null,c().createElement(o.Dropdown,{isOpen:j,onSelect:function(e){G(!1),Y(e.target.value),J(!1)},toggle:c().createElement(o.DropdownToggle,{onToggle:function(e){return G(e)}},c().createElement(s.ZP,null)," ",M),dropdownItems:["Role name","Application"].map((function(e){return c().createElement(o.DropdownItem,{key:e,value:e,component:"button"},(0,d.kC)(e))}))}),"Application"===M?c().createElement(c().Fragment,null,c().createElement("span",{id:re,hidden:!0},le),c().createElement(o.Select,{"aria-labelledby":re,variant:"checkbox","aria-label":"Select applications",onToggle:function(e){return J(e)},onSelect:function(e,t){K.includes(t)?X(K.filter((function(e){return e!==t}))):X([].concat((0,a.Z)(K),[t]))},isOpen:W,selections:K,isCheckboxSelectionBadgeHidden:!0,placeholderText:le,style:{maxHeight:"400px",overflowY:"auto"}},Z.map((function(e){return c().createElement(o.SelectOption,{key:e,value:e},(0,d.kC)(e.replace(/-/g," ")))})))):c().createElement(o.TextInput,{name:"rolesSearch",id:"rolesSearch",type:"search",iconVariant:"search","aria-label":"Search input",placeholder:"Filter by role name",value:te,onChange:function(e){return ne(e)}}))),c().createElement(o.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},c().createElement(ge,{id:"top"}))),ae&&c().createElement(o.ToolbarContent,null,te&&c().createElement(o.ChipGroup,{categoryName:"Role name"},c().createElement(o.Chip,{onClick:function(){return ne("")}},te)),K.length>0&&c().createElement(o.ChipGroup,{categoryName:"Status"},K.map((function(e){return c().createElement(o.Chip,{key:e,onClick:function(){return X(K.filter((function(t){return t!==e})))}},e)}))),xe)),_e=["Application","Resource type","Operation"],qe=(0,p.I0)(),Ae=c().createElement(i.TableComposable,{"aria-label":"My user access roles",variant:"compact"},c().createElement(i.Thead,null,c().createElement(i.Tr,null,!l&&c().createElement(i.Th,null),c().createElement(i.Th,{width:30,sort:{sortBy:{index:q,direction:B},onSort:P,columnIndex:"name"}},f[0]),c().createElement(i.Th,{width:50,sort:{sortBy:{index:q,direction:B},onSort:P,columnIndex:"description"}},f[1]),c().createElement(i.Th,{width:10,sort:{sortBy:{index:q,direction:B},onSort:P,columnIndex:"permissions"},modifier:"nowrap"},f[2]))),0===T.length&&(0,a.Z)(Array(Ee).keys()).map((function(e){return c().createElement(i.Tbody,{key:e},c().createElement(i.Tr,null,!l&&c().createElement(i.Td,null),f.map((function(e,t){return c().createElement(i.Td,{dataLabel:e,key:t},c().createElement("div",{style:{height:"22px"},className:"ins-c-skeleton ins-c-skeleton__md"}," "))}))))})),ye.map((function(e,n){return c().createElement(i.Tbody,{key:n},c().createElement(i.Tr,null,!l&&c().createElement(i.Td,{select:{rowIndex:n,onSelect:we,isSelected:t.find((function(t){return t===e.display_name}))}}),c().createElement(i.Td,{dataLabel:f[0]},e.display_name),c().createElement(i.Td,{dataLabel:f[1],className:"pf-m-truncate"},c().createElement(o.Tooltip,{entryDelay:1e3,content:e.description},c().createElement("span",{className:"pf-m-truncate pf-c-table__text"},e.description))),c().createElement(i.Td,{dataLabel:f[2],className:(0,m.css)("pf-c-table__compound-expansion-toggle",e.isExpanded&&"pf-m-expanded")},c().createElement("button",{type:"button",className:"pf-c-table__button",onClick:function(){return function(e){e.isExpanded=!e.isExpanded,C((0,a.Z)(T)),e.access||y.Z.get("".concat("/api/rbac/v1","/roles/").concat(e.uuid,"/"),{headers:{Accept:"application/json"}}).then((function(t){e.access=t.access.map((function(e){return e.permission.split(":")})),C((0,a.Z)(T))})).catch((function(t){return qe((0,E.wN)({variant:"danger",title:"Could not fetch permission list for ".concat(e.name,"."),description:t.message}))}))}(e)}},e.permissions))),c().createElement(i.Tr,{isExpanded:e.isExpanded,borders:!1},!l&&c().createElement(i.Td,null),c().createElement(i.Td,{className:"pf-u-p-0",colSpan:3},c().createElement(i.TableComposable,{isCompact:!0,className:"pf-m-no-border-rows"},c().createElement(i.Thead,null,c().createElement(i.Tr,null,_e.map((function(e){return c().createElement(i.Th,{key:e},e)})))),c().createElement(i.Tbody,null,Array.isArray(e.access)?e.access.map((function(e){return c().createElement(i.Tr,{key:e.join(":")},c().createElement(i.Td,{dataLabel:_e[0]},e[0]),c().createElement(i.Td,{dataLabel:_e[1]},e[1]),c().createElement(i.Td,{dataLabel:_e[2]},e[2]))})):(0,a.Z)(Array(e.permissions).keys()).map((function(e){return c().createElement(i.Tr,{key:e},_e.map((function(e){return c().createElement(i.Td,{key:e,dataLabel:e},c().createElement("div",{style:{height:"22px"},className:"ins-c-skeleton ins-c-skeleton__sm"}," "))})))})))))))})),0===ye.length&&ae&&c().createElement(i.Tr,null,c().createElement(i.Td,{colSpan:f.length},c().createElement(o.EmptyState,{variant:"small"},c().createElement(o.EmptyStateIcon,{icon:u.ZP}),c().createElement(o.Title,{headingLevel:"h2",size:"lg"},"No matching requests found"),c().createElement(o.EmptyStateBody,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."),xe))));return c().createElement(c().Fragment,null,!l&&c().createElement(c().Fragment,null,c().createElement(o.Title,{headingLevel:"h2"},"Select roles"),c().createElement("p",null,"Select the roles you would like access to.")),Ie,Ae,l&&c().createElement(ge,{id:"bottom"}))};v.propTypes={roles:g().any,setRoles:g().any};const S=v},24874:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(96992),r=n.n(a),l=n(93619),c=n(1140),o=n(85118),i=r().create();i.interceptors.request.use(l.w5),i.interceptors.response.use(l.xH),i.interceptors.response.use(null,l.Di),i.interceptors.response.use(null,(function(e){var t=c.Z.getStore();throw e.response&&403===e.response.status&&t.dispatch({type:o.j,payload:403}),e})),i.interceptors.response.use(null,l.ub),i.interceptors.response.use(null,l.ud);const s=i},42027:(e,t,n)=>{"use strict";n.d(t,{m:()=>f,p:()=>g});var a=n(70885),r=n(92950),l=n.n(r),c=n(56976),o=n(51352),i=n(83215),s=n(76710),u=n(4145),d=n(80164),m=n(45697),p=n.n(m),E=n(24874);function f(e,t,n){var a=[];return"pending"===e&&(a.push({title:"Edit",onClick:function(){return n({type:"edit",requestId:t})}}),a.push({title:"Cancel",onClick:function(){return n({type:"cancel",requestId:t})}})),{items:a,disable:0===a.length}}function g(e){var t=e.requestId,n=e.status,r=e.hideActions,m=l().useState(n),p=(0,a.Z)(m,2),f=p[0],g=p[1],y=l().useState(!1),h=(0,a.Z)(y,2),b=h[0],v=h[1],S=l().useState(!1),T=(0,a.Z)(S,2),C=T[0],k=T[1],w=(0,o.I0)();function Z(e){k(!0),E.Z.patch("".concat("/api/rbac/v1","/cross-account-requests/").concat(t,"/"),{status:e},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){if(t.errors&&t.errors.length>0)throw Error(t.errors.map((function(e){return e.detail})).join("\n"));w((0,i.wN)({variant:"success",title:"Request ".concat(e," successfully")})),g(e),v(!1),k(!1)})).catch((function(t){w((0,i.wN)({variant:"danger",title:"There was an error ".concat("approved"===e?"approving":"denying"," your request"),description:t.message})),k(!1)}))}var x=l().createElement(c.Label,(0,s.Q)(f),(0,d.kC)(f));return r?x:l().createElement(l().Fragment,null,b||"pending"===f?l().createElement(l().Fragment,null,l().createElement(c.Button,{className:"pf-u-mr-md",isDisabled:C||"approved"===f,variant:"primary",onClick:function(){return Z("approved")}},"Approve"),l().createElement(c.Button,{className:"pf-u-mr-md",isDisabled:C||"denied"===f,variant:"danger",onClick:function(){return Z("denied")}},"Deny")):x,["approved","denied"].includes(f)&&l().createElement(c.Button,{variant:"plain","aria-label":"Edit status",onClick:function(){return v(!b)}},l().createElement(u.ZP,null)))}g.propTypes={requestId:p().string,status:p().any,hideActions:p().any}},76710:(e,t,n)=>{"use strict";n.d(t,{Q:()=>u});var a=n(92950),r=n.n(a),l=n(35451),c=n(84564),o=n(3235),i=n(18802),s=n(75427);function u(e){var t=null,n=null;return"pending"===e?(t="blue",n=r().createElement(i.ZP,null)):"approved"===e?(t="green",n=r().createElement(l.ZP,null)):"denied"===e?(t="red",n=r().createElement(c.ZP,null)):"cancelled"===e?(t="orange",n=r().createElement(o.ZP,null)):"expired"===e&&(t="grey",n=r().createElement(s.ZP,null)),{color:t,icon:n}}},11452:()=>{},10497:()=>{},32857:()=>{},93818:()=>{},94498:()=>{},28992:()=>{},90479:()=>{},78752:()=>{},36974:()=>{}}]);
//# sourceMappingURL=../sourcemaps/773.f05e751c06c7656175039f946a149b70.js.map