(self.webpackChunkaccessRequests=self.webpackChunkaccessRequests||[]).push([[116],{88220:(e,t,a)=>{"use strict";a.d(t,{Z:()=>E});var n=a(28416),l=a.n(n),r=a(7713),s=a(47173),c=a(37619),o=a(39704),i=a(83215),m=a(45697),d=a.n(m),u=a(43598);const p=({requestId:e,onClose:t})=>{const[a,n]=l().useState(!1),m=(0,o.I0)();return l().createElement(r.u,{title:"Cancel request?",isOpen:!0,variant:"small",onClose:()=>t(!1),actions:[l().createElement(s.zx,{key:"confirm",variant:"danger",onClick:()=>{n(!0),u.Z.patch(`/api/rbac/v1/cross-account-requests/${e}/`,{status:"cancelled"},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{if(e.errors&&e.errors.length>0)throw Error(e.errors.map((e=>e.detail)).join("\n"));m((0,i.wN)({variant:"success",title:"Request cancelled successfully"})),n(!1),t(!0)})).catch((e=>{m((0,i.wN)({variant:"danger",title:"There was an error cancelling your request",description:e.message})),n(!1),t(!0)}))}},"Yes, cancel"),l().createElement(s.zx,{key:"cancel",variant:"link",onClick:()=>t(!1)},"No, keep")]},"Request ",l().createElement("b",null,e)," will be withdrawn.",a&&l().createElement(c.$,{size:"lg"}))};p.propTypes={requestId:d().string,onClose:d().func};const E=p},22342:(e,t,a)=>{"use strict";a.d(t,{Z:()=>se});var n=a(28416),l=a.n(n),r=a(45697),s=a.n(r),c=a(39704),o=a(83215),i=a(52643),m=a(47173),d=a(80164),u=a(9947),p=a(38424),E=a(75106),g=a(7713),h=a(37619),y=a(38779),v=a(46985),f=a(84564),b=a(51912),S=a(67850),C=a(939),k=a(81169),w=a(48880),q=a(59775),T=a(1807),x=a(64124),R=a(96354),P=a(84213),D=a(46043);const _=({headerContent:e=null,bodyContent:t=null,field:a="input"})=>l().createElement(D.J,{headerContent:e,bodyContent:t},l().createElement("button",{type:"button","aria-label":`More info for ${a}`,onClick:e=>e.preventDefault(),"aria-describedby":"form-name",className:"pf-v5-c-form__group-label-help"},l().createElement(P.ZP,{noVerticalAlign:!0})));_.propTypes={headerContent:s().element,bodyContent:s().element,field:s().string};const F=_,N="account-number",I="org-id",A="start",Z="end",L="selected-roles",B=e=>{const{input:t}=(0,k.Z)(e),a=(0,w.default)().getState().values,[r,s]=(0,n.useState)(a[L]||[]);return(0,n.useEffect)((()=>{t.onChange(r)}),[r]),l().createElement(q.c,{fieldId:"select-role"},l().createElement(T.Z,{roles:r,setRoles:s}))};B.propTypes={selectedRoles:s().array,setSelectedRoles:s().func,title:s().string,description:s().string};const O=B;var $=a(50693),z=a(16475),j=a(49739),M=a(83826),J=a(68340);const G=()=>{const e=(0,w.default)().getState().values;return l().createElement(l().Fragment,null,l().createElement(j.K,{className:"accessRequests"},l().createElement(M.v,{className:"pf-v5-u-mb-md"},l().createElement($.r,null,l().createElement(z.P,{sm:12,md:2},l().createElement(J.x,{component:J.q.h4,className:"access-requests-bold-text"},"Account number")),l().createElement(z.P,{sm:12,md:10},l().createElement(J.x,{component:J.q.p},e[N])))),l().createElement(M.v,null,l().createElement($.r,null,l().createElement(z.P,{sm:12,md:2},l().createElement(J.x,{component:J.q.h4,className:"access-requests-bold-text"},"Access duration")))),l().createElement(M.v,null,l().createElement($.r,null,l().createElement(z.P,{sm:12,md:2},l().createElement(J.x,{component:J.q.h4},"From")),l().createElement(z.P,{sm:12,md:10},l().createElement(J.x,{component:J.q.p},e[A])))),l().createElement(M.v,{className:"pf-v5-u-mb-md"},l().createElement($.r,null,l().createElement(z.P,{sm:12,md:2},l().createElement(J.x,{component:J.q.h4},"To")),l().createElement(z.P,{sm:12,md:10},l().createElement(J.x,{component:J.q.p},e[Z])))),l().createElement(M.v,null,l().createElement($.r,null,l().createElement(z.P,{sm:12,md:2},l().createElement(J.x,{component:J.q.h4,className:"access-requests-bold-text"},"Roles")),l().createElement(z.P,{sm:12,md:10},l().createElement(J.x,{component:J.q.p},e[L]?.[0])))),e[L]?.slice(1).map((e=>l().createElement(M.v,{key:e},l().createElement($.r,null,l().createElement(z.P,{sm:12,md:2},l().createElement(J.x,{component:J.q.h4})),l().createElement(z.P,{sm:12,md:10},l().createElement(J.x,{component:J.q.p},e))))))))};G.propTypes={targetAccount:s().any,start:s().any,end:s().any,roles:s().any,isLoading:s().any,error:s().any,onClose:s().any};const U=G;var X=a(62617),Q=a(36621),V=a(2628),Y=a(46158),H=a(79851),K=a(34512),W=a(1774);var ee=a(92607);var te=a(43598);const ae="Invalid Account number",ne=e=>l().createElement(S.ZP,{...e,showFormControls:!1}),le={"set-name":()=>{const{getState:e}=(0,w.default)(),t=l().createElement("p",null,"Customers will be able to see this information as part of your request");return l().createElement(H.P,{hasGutter:!0},l().createElement(K.J,{isFilled:!0},l().createElement(q.c,{label:"First name",name:"first-name",labelIcon:l().createElement(F,{bodyContent:t,field:"first name"})},l().createElement(ee.oi,{id:"first-name",value:e().values["first-name"],isDisabled:!0}))),l().createElement(K.J,{isFilled:!0},l().createElement(q.c,{label:"Last name",name:"last-name",labelIcon:l().createElement(F,{bodyContent:t,field:"last name"})},l().createElement(ee.oi,{id:"last-name",value:e().values["last-name"],isDisabled:!0}))))},"access-duration":()=>{const e=(0,w.default)(),t=e.getState().values,[a,n]=l().useState(),[r,s]=l().useState(),[c,o]=l().useState(),i=new Date;i.setDate(i.getDate()-1);const m=new Date;m.setDate(m.getDate()+60);const d=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),u=e=>/^([0]?[1-9]|[1][0-2])\/([0]?[1-9]|[1|2][0-9]|[3][0|1])\/([0-9]{4})$/.test(e),p=e=>{const t=e.split("/");if(!u(e))return;const a=t[0].padStart(2,"0"),n=t[1].padStart(2,"0"),l=t[2].padStart(4,"0");return new Date(`${l}-${a}-${n}T00:00:00`)},E=e=>{if((0,Y.q)(e)){if(e<i){const e="Start date must be today or later";return o(e),e}if(e>m){const e="Start date must be within 60 days of today";return o(e),e}}return o(),""},g=e=>{if(s(),(0,Y.q)(a)){if(a>e){const e="End date must be after start date";return s(e),e}const t=new Date(a);t.setFullYear(t.getFullYear()+1);const n="Access duration may not be longer than one year";return e>t&&s(n),e>t?n:""}return s(),""},h=(t,a,l)=>{n(l?new Date(l):void 0),e.change(A,u(a)?a:""),(0,Y.q)(l)&&!E(l)&&(l.setDate(l.getDate()+7),e.change(Z,d(l)),s())},y=(t,n,l)=>{g(l)||!u(n)?e.change(Z,""):(e.change(Z,n),E(a)&&e.change(A,"")&&o())};return l().createElement(q.c,{label:"Access duration",isRequired:!0,labelIcon:l().createElement(F,{bodyContent:l().createElement("div",null,"This is the time frame you would like to be granted read access to accounts."),field:"access duration"})},l().createElement(H.P,{hasGutter:!0},l().createElement(K.J,null,l().createElement(X.M,{"aria-label":"Start date",placeholder:"mm/dd/yyyy",value:t[A],dateFormat:d,dateParse:p,onChange:h,validators:[E],inputProps:{onBlur:({target:{value:e}})=>h(),validated:""===t[A]||t[A]&&!u(t[A])?W.LD.error:W.LD.default}}),c||""===t[A]?l().createElement(Q.p,null,l().createElement(V.u,{variant:"error"},""===t[A]?"Enter a valid date ":c)):null),l().createElement(K.J,{className:"pf-v5-u-mt-sm"},"to"),l().createElement(K.J,null,l().createElement(X.M,{"aria-label":"End date",placeholder:"mm/dd/yyyy",value:t[Z],dateFormat:d,dateParse:p,onChange:y,validators:[g],inputProps:{onBlur:({target:{value:e}})=>y(),validated:""===t[Z]||t[Z]&&!u(t[Z])?W.LD.error:W.LD.default}}),r||""===t[Z]?l().createElement(Q.p,null,l().createElement(V.u,{variant:"error"},""===t[A]?"Enter a valid date ":r)):null)))},"select-roles":O,"review-details":U},re=({requestId:e,variant:t,onClose:a})=>{const r=(0,c.I0)(),s="edit"===t,S=(0,n.useRef)(((e,t)=>({fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,className:"accessRequests",title:`${(0,d.kC)(t)} request`,fields:[{name:"details",nextStep:"select-roles",title:"Request details",fields:[{component:"set-name",name:"name",validate:[{type:x.Z.REQUIRED}]},{component:R.Z.TEXT_FIELD,isRequired:!0,label:"Account number",isDisabled:e,placeholder:"Example, 8675309",FormGroupProps:{labelIcon:l().createElement(F,{bodyContent:l().createElement("p",null,"This is the account number that you would like to receive read access to"),field:"account number"})},helperText:"Enter the account number you would like access to",name:N,validate:[{type:"validate-account"}]},{component:R.Z.TEXT_FIELD,isRequired:!0,label:"Organization ID",placeholder:"Example, 1234567",isDisabled:e,FormGroupProps:{labelIcon:l().createElement(F,{bodyContent:l().createElement("p",null,"This is the org ID of the account that you would like to receive read access to"),field:"organization ID"})},helperText:"Enter the organization ID you would like access to",name:I,validate:[{type:"validate-org-id"}]},{name:"access-duration",component:"access-duration",label:"Access duration",isRequired:!0},{name:A,component:R.Z.TEXT_FIELD,hideField:!0,isRequired:!0,validate:[e=>e?.length>0?void 0:"Invalid start date"]},{name:Z,component:R.Z.TEXT_FIELD,hideField:!0,isRequired:!0,validate:[e=>e?.length>0?void 0:"Invalid end date"]}]},{name:"select-roles",nextStep:"review-details",title:"Select roles",StepTemplate:e=>e.formFields,fields:[{component:"select-roles",name:L,validate:[e=>e?.length>0?void 0:"No roles selected"]}]},{name:"review-details",title:"Review details",fields:[{component:"review-details",name:"review-details"}]}]}]}))(s,t)),[k,w]=(0,n.useState)(!1),[q,T]=l().useState(),[P,D]=l().useState(),[_,B]=l().useState(!1),[O,$]=l().useState(!1),[z,j]=l().useState();l().useEffect((()=>{B(!0);const t=insights.chrome.auth.getUser(),a=s?te.Z.get(`/api/rbac/v1/cross-account-requests/${e}/?query_by=user_id`,{headers:{Accept:"application/json"}}):new Promise((e=>e(!0)));Promise.all([t,a]).then((([t,a])=>{if(!(t&&t.identity&&t.identity.user))throw Error("Couldn't get current user. Make sure you're logged in");if(j(t.identity.user),s){if(a.errors)throw Error(a.errors.map((e=>e.detail)).join("\n"));if(!a||!a.target_account)throw Error(`Could not fetch details for request ${e}`);D({[N]:a.target_account,[I]:a.target_org,[A]:a.start_date,[Z]:a.end_date,[L]:a.roles.map((e=>e.display_name))})}B(!1)})).catch((e=>{r((0,o.wN)({variant:"danger",title:"Could not load access request",description:e.message}))}))}),[]);const M={"validate-account":()=>e=>e&&!q?void 0:"Please enter a valid account number","validate-org-id":()=>e=>e&&!q?void 0:"Please enter a valid organization ID","validate-duration":()=>e=>e?.length>0};return k?l().createElement(g.u,{title:"Exit request creation?",variant:"small",titleIconVariant:"warning",isOpen:!0,onClose:()=>{w(!1),a(!1)},actions:[l().createElement(m.zx,{key:"confirm",variant:"primary",onClick:()=>a(!1)},"Exit"),l().createElement(m.zx,{key:"cancel",variant:"link",onClick:()=>w(!1)},"Stay")]},"All inputs will be discarded."):q||_||O?l().createElement(g.u,{isOpen:!0,variant:g.v.large,showClose:!1,className:"accessRequests",hasNoBodyWrapper:!0,"aria-describedby":"wiz-modal-description","aria-labelledby":"wiz-modal-title"},l().createElement(v.e,{className:"accessRequests",title:`${(0,d.kC)(t)} request`,steps:[{name:"status",component:_?l().createElement(i.b,null,l().createElement(h.$,null)):l().createElement(u.u,null,O?l().createElement(l().Fragment,null,l().createElement(p.k,{icon:()=>l().createElement(h.$,{size:"lg"})}),l().createElement(y.D,{headingLevel:"h2",size:"lg"},"Submitting access request"),l().createElement(m.zx,{variant:"link",onClick:()=>a(!0)},"Close")):l().createElement(l().Fragment,null,l().createElement(p.k,{icon:f.ZP,color:"#C9190B"}),l().createElement(y.D,{headingLevel:"h2",size:"lg"},q.title||"An error occured"),l().createElement(E.B,null,q.description),q.title!==ae&&l().createElement(m.zx,{variant:"primary",onClick:()=>T()},"Return to Step 1"))),isFinishedStep:!0}],onClose:()=>a(!0)})):l().createElement(b.Z,{schema:S.current,subscription:{values:!0},FormTemplate:ne,componentMapper:{...C.ZP,...le},validatorMapper:M,onSubmit:n=>{$(!0);const l={target_account:n[N],start_date:n[A],end_date:n[Z],target_org:n[I],roles:n[L]};D(n),te.Z[s?"put":"post"]("/api/rbac/v1/cross-account-requests/"+(s?`/${e}/`:""),l,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{if(e.errors&&e.errors.length>0)throw Error(e.errors[0].detail);r((0,o.wN)({variant:"success",title:(s?"Edited":"Created")+" access request",description:e.request_id})),a(!0)})).catch((({errors:e=[]})=>{const a=/Account .* does not exist/.test(e[0]?.message||e[0]?.detail);T({title:a?ae:`Could not ${t} access request`,description:a?"Please return to Step 1: Request details and input a new account number for your request.":e[0]?.message||e[0]?.detail}),$(!1)}))},initialValues:{...P,"first-name":z?.first_name,"last-name":z?.last_name},onCancel:()=>w(!0)})};re.propTypes={requestId:s().string,variant:s().any,onClose:s().func};const se=re},1807:(e,t,a)=>{"use strict";a.d(t,{Z:()=>W});var n=a(28416),l=a.n(n),r=a(38779),s=a(47173),c=a(68907),o=a(75824),i=a(75863),m=a(51630),d=a(8128),u=a(3831),p=a(75521),E=a(64249),g=a(69826),h=a(38296),y=a(39704),v=a(83215),f=a(45697),b=a.n(f),S=a(43598),C=a(80164),k=a(39560),w=a(39841),q=a(1595),T=a(82011),x=a(43446),R=a(92607),P=a(73597),D=a(71710),_=a(79332),F=a(85998),N=a(65146),I=a(85044),A=a(46361),Z=a(27730),L=a(76889);const B="filter-application",O="Filter by application",$=({selectedRoles:e,setSelectedRoles:t,isChecked:a,appSelections:r,setAppSelections:s,columns:c,rows:o,filteredRows:i,pagedRows:m,anySelected:d,clearFiltersButton:u,perPage:p,nameFilter:E,setNameFilter:g,AccessRequestsPagination:h,applications:y})=>{const v={isDropdownOpen:!1,isSelectOpen:!1,isBulkSelectOpen:!1,filterColumn:c[0]},[f,b]=(0,n.useReducer)(((e,t)=>{switch(t.type){case"set":return{...e,[t.payload.key]:t.payload.value};case"reset":return v;default:throw new Error("Unknown action type: ${action.type}")}}),v),S=(e,t)=>{b({type:"set",payload:{key:e,value:t}})},$=r.length>0||E,z=(e,a)=>{t(a?i.map((e=>e.display_name)):[])};return l().createElement(l().Fragment,null,l().createElement(k.o,{id:"access-requests-roles-table-toolbar"},l().createElement(w.c,null,l().createElement(q.E,null,l().createElement(_.L,{onSelect:()=>S("isBulkSelectOpen",!f.isBulkSelectOpen),position:"left",toggle:l().createElement(F.Z,{splitButtonItems:[l().createElement(N.o,{key:"a",id:"example-checkbox-2","aria-label":d?"Deselect all":"Select all",isChecked:a,onClick:()=>z(0,!d)})],onToggle:(e,t)=>S("isBulkSelectOpen",t),isDisabled:0===o.length},0!==e.length&&l().createElement(l().Fragment,null,e.length," selected")),isOpen:f.isBulkSelectOpen,dropdownItems:[l().createElement(I.h,{key:"0",onClick:()=>z(0,!1)},"Select none (0 items)"),l().createElement(I.h,{key:"1",onClick:()=>t(e.concat(m.map((e=>e.display_name))))},"Select page (",Math.min(m.length,p)," items)"),l().createElement(I.h,{key:"2",onClick:()=>z(0,!0)},"Select all (",i.length," items)")]})),l().createElement(q.E,null,l().createElement(T.B,null,l().createElement(x.o,null,l().createElement(_.L,{isOpen:f.isDropdownOpen,onSelect:e=>{S("isDropdownOpen",!1),S("isSelectOpen",!1),S("filterColumn",e.target.value)},toggle:l().createElement(F.Z,{onToggle:(e,t)=>S("isDropdownOpen",t)},l().createElement(L.ZP,null)," ",f.filterColumn),dropdownItems:["Role name","Application"].map((e=>l().createElement(I.h,{key:e,value:e,component:"button"},(0,C.kC)(e))))})),"Application"===f.filterColumn?l().createElement(l().Fragment,null,l().createElement("span",{id:B,hidden:!0},O),l().createElement(A.P,{"aria-labelledby":B,variant:"checkbox","aria-label":"Select applications",onToggle:(e,t)=>S("isSelectOpen",t),onSelect:(e,t)=>{r.includes(t)?s((e=>e.filter((e=>e!==t)))):s([...r,t])},isOpen:f.isSelectOpen,selections:r,isCheckboxSelectionBadgeHidden:!0,placeholderText:O,className:"select-toolbar"},y.map((e=>l().createElement(Z.$,{key:e,value:e},(0,C.kC)(e.replace(/-/g," "))))))):l().createElement(R.oi,{name:"rolesSearch",id:"rolesSearch",type:"search","aria-label":"Search input",placeholder:"Filter by role name",value:E,onChange:(e,t)=>g(t)}))),l().createElement(q.E,{variant:"pagination",align:{default:"alignRight"}},l().createElement(h,{id:"top"}))),$&&l().createElement(w.c,null,E&&l().createElement(P.Z,{categoryName:"Role name"},l().createElement(D.A,{onClick:()=>g("")},E)),r.length>0&&l().createElement(P.Z,{categoryName:"Status"},r.map((e=>l().createElement(D.A,{key:e,onClick:()=>s((t=>t.filter((t=>t!==e))))},e)))),u)))};$.propTypes={selectedRoles:b().array,setSelectedRoles:b().func,isChecked:b().bool,appSelections:b().any,setAppSelections:b().func,columns:b().array,rows:b().array,filteredRows:b().array,pagedRows:b().array,anySelected:b().bool,clearFiltersButton:b().object,perPage:b().number,nameFilter:b().string,setNameFilter:b().func,AccessRequestsPagination:b().func,applications:b().array};const z=$;var j=a(9947),M=a(67880),J=a(38424),G=a(75106),U=a(80315),X=a(71070);const Q=({columns:e,clearFiltersButton:t})=>l().createElement(p.p,null,l().createElement(d.Tr,null,l().createElement(E.Td,{colSpan:e.length},l().createElement(j.u,{variant:"sm"},l().createElement(M.t,{titleText:"No matching requests found",icon:l().createElement(J.k,{icon:X.ZP}),headingLevel:"h2"}),l().createElement(G.B,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."),l().createElement(U.O,null,t)))));Q.propTypes={columns:b().array,clearFiltersButton:b().object};const V=Q;let Y=[],H=[];const K=({roles:e,setRoles:t})=>{const a=void 0===t,n=["Role name","Role description","Permissions"],[f,C]=l().useState(Array.from(Y)),[k,w]=l().useState(H),[q,T]=l().useState([]);l().useEffect((()=>{0!==Y.length&&0!==H.length||S.Z.get("/api/rbac/v1/roles/?system=true&limit=9999&order_by=display_name&add_fields=groups_in_count",{headers:{Accept:"application/json"}}).then((({data:e})=>{e.forEach((e=>{e.isExpanded=!1,e.permissions=e.accessCount})),Y=e.map((e=>Object.assign({},e))),C(e);const t=Array.from(e.map((e=>e.applications)).flat().reduce(((e,t)=>(e.add(t),e)),new Set)).sort();H=t,w(t)})).catch((e=>W((0,v.wN)({variant:"danger",title:"Could not fetch roles list",description:e.message}))))}),[]);const[x,R]=l().useState("name"),[P,D]=l().useState("asc"),_=(e,t,a)=>{R(t),D(a)},[F,N]=l().useState(""),I=q.length>0||F,A=e.map((e=>e.display_name)),Z=f.filter((e=>!(q.length>0)||e.applications.find((e=>q.includes(e))))).filter((e=>e.display_name.toLowerCase().includes(F.toLowerCase()))).filter((e=>!a||A.includes(e.display_name))),[L,B]=l().useState(1),[O,$]=l().useState(10),j=({id:e})=>l().createElement(c.t,{itemCount:Z.length,perPage:O,page:L,onSetPage:(e,t)=>B(t),id:`access-requests-roles-table-pagination-${e}`,variant:e,onPerPageSelect:(e,t)=>{B(1),$(t)},isCompact:"top"===e});j.propTypes={id:b().string};const M=Z.sort(((e,t)=>"number"==typeof e[x]?"asc"===P?e[x]-t[x]:t[x]-e[x]:"asc"===P?(e[x]+"").localeCompare(t[x]):(t[x]+"").localeCompare(e[x]))).slice((L-1)*O,L*O),J=!!(e.length>0)&&null,G=e.length===Z.length&&e.length>0||J,U=(a,n,l)=>{const r=M[l].display_name;t(n?e.concat(r):e.filter((e=>e!==r)))},X=l().createElement(s.zx,{variant:"link",onClick:()=>{T([]),N("")}},"Clear filters"),Q=a?null:l().createElement(z,{selectedRoles:e,setSelectedRoles:t,isChecked:G,appSelections:q,setAppSelections:T,columns:n,rows:f,filteredRows:Z,pagedRows:M,clearFiltersButton:X,perPage:O,nameFilter:F,setNameFilter:N,AccessRequestsPagination:j,applications:k}),K=["Application","Resource type","Operation"],W=(0,y.I0)(),ee=l().createElement(g.i,{"aria-label":"My user access roles",variant:i.B.compact},l().createElement(m.h,null,l().createElement(d.Tr,null,!a&&l().createElement(u.Th,null),l().createElement(u.Th,{width:30,sort:{sortBy:{index:x,direction:P},onSort:_,columnIndex:"name"}},n[0]),l().createElement(u.Th,{width:50,sort:{sortBy:{index:x,direction:P},onSort:_,columnIndex:"description"}},n[1]),l().createElement(u.Th,{width:10,sort:{sortBy:{index:x,direction:P},onSort:_,columnIndex:"permissions"},modifier:"nowrap"},n[2]))),0===f.length&&[...Array(O).keys()].map((e=>l().createElement(p.p,{key:e},l().createElement(d.Tr,null,!a&&l().createElement(E.Td,null),n.map(((e,t)=>l().createElement(E.Td,{dataLabel:e,key:t},l().createElement("div",{style:{height:"22px"},className:"ins-c-skeleton ins-c-skeleton__md"}," ")))))))),M.map(((t,r)=>l().createElement(p.p,{key:r},l().createElement(d.Tr,null,!a&&l().createElement(E.Td,{select:{rowIndex:r,onSelect:U,isSelected:e.find((e=>e===t.display_name))}}),l().createElement(E.Td,{dataLabel:n[0]},t.display_name),l().createElement(E.Td,{dataLabel:n[1],className:"pf-v5-m-truncate"},l().createElement(o.u,{entryDelay:1e3,content:t.description},l().createElement("span",{className:"pf-v5-m-truncate pf-v5-c-table__text"},t.description))),l().createElement(E.Td,{dataLabel:n[2],className:(0,h.i)("pf-c-table__compound-expansion-toggle",t.isExpanded&&"pf-v5-m-expanded")},l().createElement("button",{type:"button",className:"pf-v5-c-table__button",onClick:()=>(e=>{e.isExpanded=!e.isExpanded,C([...f]),e.access||S.Z.get(`/api/rbac/v1/roles/${e.uuid}/`,{headers:{Accept:"application/json"}}).then((t=>{e.access=t.access.map((e=>e.permission.split(":"))),C([...f])})).catch((t=>W((0,v.wN)({variant:"danger",title:`Could not fetch permission list for ${e.name}.`,description:t.message}))))})(t)},t.permissions))),l().createElement(d.Tr,{isExpanded:t.isExpanded},!a&&l().createElement(E.Td,null),l().createElement(E.Td,{className:"pf-v5-u-p-0",colSpan:3},l().createElement(g.i,{className:"pf-v5-m-no-border-rows"},l().createElement(m.h,null,l().createElement(d.Tr,null,K.map((e=>l().createElement(u.Th,{key:e},e))))),l().createElement(p.p,null,Array.isArray(t.access)?t.access.map((e=>l().createElement(d.Tr,{key:e.join(":")},l().createElement(E.Td,{dataLabel:K[0]},e[0]),l().createElement(E.Td,{dataLabel:K[1]},e[1]),l().createElement(E.Td,{dataLabel:K[2]},e[2])))):[...Array(t.permissions).keys()].map((e=>l().createElement(d.Tr,{key:e},K.map((e=>l().createElement(E.Td,{key:e,dataLabel:e},l().createElement("div",{style:{height:"22px"},className:"ins-c-skeleton ins-c-skeleton__sm"}," ")))))))))))))),0===M.length&&I?l().createElement(V,{columns:n,clearFiltersButton:X}):null);return l().createElement(l().Fragment,null,!a&&l().createElement(l().Fragment,null,l().createElement(r.D,{headingLevel:"h2"},"Select roles"),l().createElement("p",null,"Select the roles you would like access to.")),Q,ee,a&&l().createElement(j,{id:"bottom"}))};K.propTypes={roles:b().any,setRoles:b().any};const W=K},43598:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(89214),l=a.n(n),r=a(33366),s=a(69112),c=a(24243);const o=l().create();o.interceptors.request.use(r.w5),o.interceptors.response.use(r.xH),o.interceptors.response.use(null,r.Di),o.interceptors.response.use(null,(e=>{const t=s.Z.getStore();throw e.response&&403===e.response.status&&t.dispatch({type:c.j,payload:403}),e})),o.interceptors.response.use(null,r.ub),o.interceptors.response.use(null,r.ud);const i=o},70910:(e,t,a)=>{"use strict";a.d(t,{m:()=>g,p:()=>h});var n=a(28416),l=a.n(n),r=a(47173),s=a(82371),c=a(39704),o=a(83215),i=a(49229),m=a(73755),d=a(80164),u=a(45697),p=a.n(u),E=a(43598);function g(e,t,a){const n=[];return"pending"===e&&(n.push({title:"Edit",onClick:()=>a({type:"edit",requestId:t})}),n.push({title:"Cancel",onClick:()=>a({type:"cancel",requestId:t})})),{items:n,disable:0===n.length}}function h({requestId:e,status:t,hideActions:a}){const[n,u]=l().useState(t),[p,g]=l().useState(!1),[h,y]=l().useState(!1),v=(0,c.I0)();function f(t){y(!0),E.Z.patch(`/api/rbac/v1/cross-account-requests/${e}/`,{status:t},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{if(e.errors&&e.errors.length>0)throw Error(e.errors.map((e=>e.detail)).join("\n"));v((0,o.wN)({variant:"success",title:`Request ${t} successfully`})),u(t),g(!1),y(!1)})).catch((e=>{v((0,o.wN)({variant:"danger",title:`There was an error ${"approved"===t?"approving":"denying"} your request`,description:e.message})),y(!1)}))}const b=l().createElement(s._,{...(0,i.Q)(n)},(0,d.kC)(n));return a?b:l().createElement(l().Fragment,null,p||"pending"===n?l().createElement(l().Fragment,null,l().createElement(r.zx,{className:"pf-v5-u-mr-md",isDisabled:h||"approved"===n,variant:"primary",onClick:()=>f("approved")},"Approve"),l().createElement(r.zx,{className:"pf-v5-u-mr-md",isDisabled:h||"denied"===n,variant:"danger",onClick:()=>f("denied")},"Deny")):b,["approved","denied"].includes(n)&&l().createElement(r.zx,{variant:"plain","aria-label":"Edit status",onClick:()=>g(!p)},l().createElement(m.ZP,null)))}h.propTypes={requestId:p().string,status:p().any,hideActions:p().any}},49229:(e,t,a)=>{"use strict";a.d(t,{Q:()=>m});var n=a(28416),l=a.n(n),r=a(35451),s=a(84564),c=a(3235),o=a(18802),i=a(75427);function m(e){let t=null,a=null;return"pending"===e?(t="blue",a=l().createElement(o.ZP,null)):"approved"===e?(t="green",a=l().createElement(r.ZP,null)):"denied"===e?(t="red",a=l().createElement(s.ZP,null)):"cancelled"===e?(t="orange",a=l().createElement(c.ZP,null)):"expired"===e&&(t="grey",a=l().createElement(i.ZP,null)),{color:t,icon:a}}},82472:()=>{},97890:()=>{},17657:()=>{},22972:()=>{},43389:()=>{},70347:()=>{},10497:()=>{},1580:()=>{},94498:()=>{},54476:()=>{},28992:()=>{},80897:()=>{},30187:()=>{},40837:()=>{},78752:()=>{},71338:()=>{},44839:()=>{},21626:()=>{},74282:()=>{},24620:()=>{},82014:()=>{},25238:()=>{},92084:()=>{},1508:()=>{},91993:()=>{},99624:()=>{},36974:()=>{},27479:()=>{},56024:()=>{},54994:()=>{},44690:()=>{},37494:()=>{},67761:()=>{},43390:()=>{},22143:()=>{},97236:()=>{},40209:()=>{},38299:()=>{},72816:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/116.e332f365f12803afdb286e501dd525be.js.map