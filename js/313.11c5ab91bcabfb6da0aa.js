"use strict";(self.webpackChunkaccessRequests=self.webpackChunkaccessRequests||[]).push([[313],{8755:(e,t,a)=>{t._t={name:"FilterIcon",height:512,width:512,svgPath:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z",yOffset:0,xOffset:0},t.k1=a(35183).I(t._t),t.ZP=t.k1},20777:(e,t,a)=>{t.lb={name:"PlusCircleIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z",yOffset:0,xOffset:0},t.wl=a(35183).I(t.lb),t.ZP=t.wl},23165:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee});var n=a(28416),l=a.n(n),r=a(39704),c=a(72853),s=a(38779),i=a(80164),o=a(39560),u=a(39841),m=a(1595),d=a(47173),p=a(82011),E=a(43446),h=a(92607),g=a(68907),b=a(73597),f=a(71710),v=a(52643),y=a(9947),S=a(67880),k=a(38424),C=a(75106),q=a(80315),T=a(79332),P=a(85998),I=a(85044),L=a(46361),_=a(27730),w=a(51630),x=a(8128),Z=a(3831),A=a(75521),N=a(64249),$=a(69826),O=a(88220),R=a(22342),F=a(71070),D=a(8755),z=a(20777),B=a(83215),H=a(62012),j=a(70910),M=a(45697),V=a.n(M),Y=a(43598);const U=e=>e[0].toLowerCase()+e.substring(1),G=["pending","approved","denied","cancelled","expired"],J=({isInternal:e})=>{const t=e?["Request ID","Account number","Start date","End date","Created","Status"]:["Request ID","First name","Last name","Start date","End date","Created","Decision"],[a,n]=l().useState(e?4:5),[c,s]=l().useState("desc"),M=(e,t,a)=>{n(t),s(a)},[J,K]=l().useState(1),[Q,W]=l().useState(20),X=({id:e})=>l().createElement(g.t,{itemCount:he,perPage:Q,page:J,onSetPage:(e,t)=>K(t),id:`access-requests-table-pagination-${e}`,variant:e,perPageOptions:[5,10,20,50].map((e=>({title:e,value:e}))),onPerPageSelect:(e,t)=>{K(1),W(t)},isCompact:"top"===e});X.propTypes={id:V().string};const[ee,te]=l().useState(!1),[ae,ne]=l().useState(t[e?1:6]),[le,re]=l().useState(!1),[ce,se]=l().useState([]),[ie,oe]=l().useState(""),[ue,me]=l().useState(!1),de=ce.length>0||ie,[pe,Ee]=l().useState(!0),[he,ge]=l().useState(0),[be,fe]=l().useState([]),ve=(0,r.I0)(),ye=()=>{Ee(!0);const n=new URL(`${window.location.origin}/api/rbac/v1/cross-account-requests/`);e?n.searchParams.append("query_by","user_id"):n.searchParams.append("query_by","target_org"),n.searchParams.append("offset",(J-1)*Q),n.searchParams.append("limit",Q),ie&&n.searchParams.append("account",ie),ce.length>0&&n.searchParams.append("status",ce.join(","));const l=`${"desc"===c?"-":""}${t[a].toLowerCase().replace(" ","_")}`;n.searchParams.append("order_by",l),Y.Z.get(n.href,{headers:{Accept:"application/json"}}).then((t=>{ge(t.meta.count),fe(t.data.map((t=>e?[t.request_id,t.target_account,t.start_date,t.end_date,t.created,t.status]:[t.request_id,t.first_name,t.last_name,t.start_date,t.end_date,t.created,t.status]))),Ee(!1)})).catch((e=>{Ee(!1),ve((0,B.wN)({variant:"danger",title:"Could not list access requests",description:e.message}))}))},Se=function(e,t){const[a,n]=l().useState(e);return l().useEffect((()=>{const t=setTimeout((()=>{n(e)}),400);return()=>{clearTimeout(t)}}),[e]),a}(ie);l().useEffect((()=>{ye()}),[Se,ce,a,c,Q,J]);const[ke,Ce]=l().useState({type:null}),qe=e=>{Ce({type:null}),e&&ye()},Te=l().createElement(l().Fragment,null,"cancel"===ke.type&&l().createElement(O.Z,{requestId:ke.requestId,onClose:qe}),["edit","create"].includes(ke.type)&&l().createElement(R.Z,{variant:ke.type,requestId:ke.requestId,onClose:qe})),Pe=e&&l().createElement(d.zx,{variant:"primary",onClick:()=>Ce({type:"create"})},"Create request");if(0===be.length&&!pe&&!ue)return l().createElement(v.b,{style:{height:"auto"},className:"pf-v5-u-mt-lg"},l().createElement(y.u,{variant:"lg"},l().createElement(S.t,{titleText:l().createElement(l().Fragment,null,e?"No access requests":"You have no access requests"),icon:l().createElement(k.k,{icon:z.ZP}),headingLevel:"h3"}),l().createElement(C.B,null,e?"Click the button below to create an access request.":"You have no pending Red Hat access requests."),l().createElement(q.O,null,Pe)),Te);const Ie="filter-status",Le=`Filter by ${U(t[t.length-1])}`,_e=l().createElement(d.zx,{variant:"link",onClick:()=>{se([]),oe(""),K(1)}},"Clear filters"),we=l().createElement(o.o,{id:"access-requests-table-toolbar"},l().createElement(u.c,null,l().createElement(m.E,null,l().createElement(p.B,null,l().createElement(E.o,null,l().createElement(T.L,{isOpen:ee,onSelect:e=>{te(!1),ne(e.target.value),re(!1),me(!0)},toggle:l().createElement(P.Z,{onToggle:(e,t)=>te(t)},l().createElement(D.ZP,null)," ",ae),dropdownItems:(e?[1,5]:[6]).map((e=>t[e])).map((e=>l().createElement(I.h,{key:e,value:e,component:"button"},(0,i.kC)(e))))})),["Status","Decision"].includes(ae)&&l().createElement(l().Fragment,null,l().createElement("span",{id:Ie,hidden:!0},Le),l().createElement(L.P,{"aria-labelledby":Ie,variant:"checkbox","aria-label":"Select statuses",onToggle:(e,t)=>re(t),onSelect:(e,t)=>{me(!0),ce.includes(t)?se(ce.filter((e=>e!==t))):se([...ce,t]),K(1)},isOpen:le,selections:Array.from(ce),isCheckboxSelectionBadgeHidden:!0,placeholderText:Le},G.map((e=>l().createElement(_.$,{key:e,value:e},(0,i.kC)(e)))))),"Account number"===ae&&l().createElement("form",{style:{display:"flex"},onSubmit:e=>e.preventDefault()},l().createElement(h.oi,{name:`${ae}-filter`,id:`${ae}-filter`,type:"search",placeholder:`Filter by ${U(ae)}`,"aria-label":`${ae} search input`,value:ie,onChange:(e,t)=>{oe(t),me(!0),K(1)}})))),l().createElement(m.E,null,Pe),l().createElement(m.E,{variant:"pagination",align:{default:"alignRight"}},l().createElement(X,{id:"top"}))),l().createElement(u.c,null,l().createElement(b.Z,{categoryName:"Status"},ce.map((e=>l().createElement(f.A,{key:e,onClick:()=>{se(ce.filter((t=>t!==e))),K(1)}},e)))),ie&&l().createElement(b.Z,{categoryName:"Account number"},l().createElement(f.A,{onClick:()=>{oe(""),K(1)}},ie)),de&&_e));function xe(t){return e?0===t?30:15:[0,6].includes(t)?20:10}const Ze=l().createElement($.i,{"aria-label":"Access requests table",variant:"compact"},l().createElement(w.h,null,l().createElement(x.Tr,null,t.map(((e,t)=>l().createElement(Z.Th,{key:t,...!e.includes("name")&&"Decision"!==e&&{sort:{sortBy:{index:a,direction:c},onSort:M,columnIndex:t}},width:xe(t)},e))),e&&l().createElement(Z.Th,null))),l().createElement(A.p,null,pe?[...Array(be.length||Q).keys()].map((e=>l().createElement(x.Tr,{key:e},t.map(((e,t)=>l().createElement(N.Td,{key:t,dataLabel:e},l().createElement("div",{style:{height:"30px"},className:"ins-c-skeleton ins-c-skeleton__md"}," "))))))):be.map(((a,n)=>l().createElement(x.Tr,{key:n},l().createElement(N.Td,{dataLabel:t[0]},l().createElement(H.Link,{to:a[0]},a[0])),l().createElement(N.Td,{dataLabel:t[1]},a[1]),l().createElement(N.Td,{dataLabel:t[2]},a[2]),l().createElement(N.Td,{dataLabel:t[3]},a[3]),l().createElement(N.Td,{dataLabel:t[4]},a[4]),e?l().createElement(N.Td,{dataLabel:t[5]},l().createElement(j.p,{requestId:a[0],status:a[5],onLabelClick:()=>{se([...ce.filter((e=>e!==status)),status]),K(1)},hideActions:!0})):l().createElement(N.Td,{dataLabel:t[5]},a[5]),e?l().createElement(N.Td,{actions:(0,j.m)(a[5],a[0],Ce)}):l().createElement(N.Td,{dataLabel:t[6]},l().createElement(j.p,{requestId:a[0],status:a[6]}))))),0===be.length&&de?l().createElement(x.Tr,null,l().createElement(N.Td,{colSpan:t.length},l().createElement("div",null,l().createElement(y.u,{variant:"sm"},l().createElement(S.t,{titleText:"No matching requests found",icon:l().createElement(k.k,{icon:F.ZP}),headingLevel:"h2"}),l().createElement(C.B,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."),l().createElement(q.O,null,_e))))):null));return l().createElement(l().Fragment,null,we,Ze,l().createElement(X,{id:"bottom"}),Te)};J.propTypes={isInternal:V().bool};const K=J;var Q=a(69112),W=a(2639);const X=e=>l().createElement(r.zt,{store:Q.Z.getStore()},l().createElement(W.Z,null,l().createElement(c.NP,{variant:"light"},l().createElement(s.D,{headingLevel:"h1",className:"pf-v5-u-pb-sm"},"Access Requests"),l().createElement("p",null,"Below is a list of all submitted requests for read only account access.")),l().createElement(c.NP,{padding:{default:"noPadding"}},l().createElement(K,{isInternal:e?.isInternal}))));X.propTypes={isInternal:V().bool};const ee=X}}]);
//# sourceMappingURL=../sourcemaps/313.94fcd5682b8edbadd534e87b0a4f2356.js.map