"use strict";(self.webpackChunk_redhat_cloud_services_access_requests_frontend=self.webpackChunk_redhat_cloud_services_access_requests_frontend||[]).push([[180],{20777:(e,t,a)=>{t.lb={name:"PlusCircleIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z",yOffset:0,xOffset:0},t.wl=a(35183).createIcon(t.lb),t.ZP=t.wl},42395:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var n=a(92950),r=a.n(n),c=a(28216),l=a(56976),o=a(87462),s=a(93433),u=a(29439),i=a(98975),m=a(24821),d=a(17733),p=a(479),f=a(80164),E=a(48794),h=a(8755),g=a(20777),b=a(83215),v=a(334),y=a(42027),S=a(45697),T=a.n(S),C=a(24874);function _(e){return e[0].toLowerCase()+e.substring(1)}var Z=["pending","approved","denied","cancelled","expired"],q=function(e){var t=e.isInternal,a=t?["Request ID","Account number","Start date","End date","Created","Status"]:["Request ID","First name","Last name","Start date","End date","Created","Decision"],n=r().useState(t?4:5),S=(0,u.Z)(n,2),q=S[0],k=S[1],I=r().useState("desc"),P=(0,u.Z)(I,2),w=P[0],L=P[1],x=function(e,t,a){k(t),L(a)},A=r().useState(1),D=(0,u.Z)(A,2),N=D[0],B=D[1],R=r().useState(20),F=(0,u.Z)(R,2),O=F[0],z=F[1],G=function(e){var t=e.id;return r().createElement(l.Pagination,{itemCount:Ze,perPage:O,page:N,onSetPage:function(e,t){return B(t)},id:"access-requests-table-pagination-"+t,variant:t,perPageOptions:[5,10,20,50].map((function(e){return{title:e,value:e}})),onPerPageSelect:function(e,t){B(1),z(t)},isCompact:"top"===t})};G.propTypes={id:T().string};var j,H,M,Y,U,V=r().useState(!1),W=(0,u.Z)(V,2),J=W[0],K=W[1],Q=r().useState(a[t?1:6]),X=(0,u.Z)(Q,2),$=X[0],ee=X[1],te=r().useState(!1),ae=(0,u.Z)(te,2),ne=ae[0],re=ae[1],ce=r().useState([]),le=(0,u.Z)(ce,2),oe=le[0],se=le[1],ue=r().useState(""),ie=(0,u.Z)(ue,2),me=ie[0],de=ie[1],pe=r().useState(!1),fe=(0,u.Z)(pe,2),Ee=fe[0],he=fe[1],ge=oe.length>0||me,be=(0,m.useFlag)("platform.chrome.tamtool.orgid"),ve=r().useState(!0),ye=(0,u.Z)(ve,2),Se=ye[0],Te=ye[1],Ce=r().useState(0),_e=(0,u.Z)(Ce,2),Ze=_e[0],qe=_e[1],ke=r().useState([]),Ie=(0,u.Z)(ke,2),Pe=Ie[0],we=Ie[1],Le=(0,c.I0)(),xe=function(){Te(!0);var e=new URL("".concat(window.location.origin).concat("/api/rbac/v1","/cross-account-requests/"));t?e.searchParams.append("query_by","user_id"):e.searchParams.append("query_by",be?"target_org":"target_account"),e.searchParams.append("offset",(N-1)*O),e.searchParams.append("limit",O),me&&e.searchParams.append("account",me),oe.length>0&&e.searchParams.append("status",oe.join(","));var n="".concat("desc"===w?"-":"").concat(a[q].toLowerCase().replace(" ","_"));e.searchParams.append("order_by",n),C.Z.get(e.href,{headers:{Accept:"application/json"}}).then((function(e){qe(e.meta.count),we(e.data.map((function(e){return t?[e.request_id,e.target_account,e.start_date,e.end_date,e.created,e.status]:[e.request_id,e.first_name,e.last_name,e.start_date,e.end_date,e.created,e.status]}))),Te(!1)})).catch((function(e){Te(!1),Le((0,b.wN)({variant:"danger",title:"Could not list access requests",description:e.message}))}))},Ae=(j=me,400,H=r().useState(j),Y=(M=(0,u.Z)(H,2))[0],U=M[1],r().useEffect((function(){var e=setTimeout((function(){U(j)}),400);return function(){clearTimeout(e)}}),[j]),Y);r().useEffect((function(){xe()}),[Ae,oe,q,w,O,N]);var De=r().useState({type:null}),Ne=(0,u.Z)(De,2),Be=Ne[0],Re=Ne[1],Fe=function(e){Re({type:null}),e&&xe()},Oe=r().createElement(r().Fragment,null,"cancel"===Be.type&&r().createElement(d.Z,{requestId:Be.requestId,onClose:Fe}),["edit","create"].includes(Be.type)&&r().createElement(p.Z,{variant:Be.type,requestId:Be.requestId,onClose:Fe})),ze=t&&r().createElement(l.Button,{variant:"primary",onClick:function(){return Re({type:"create"})}},"Create request");if(0===Pe.length&&!Se&&!Ee)return r().createElement(l.Bullseye,{style:{height:"auto"},className:"pf-u-mt-lg"},r().createElement(l.EmptyState,{variant:"large"},r().createElement(l.EmptyStateIcon,{icon:g.ZP}),r().createElement(l.Title,{headingLevel:"h3",size:"lg"},t?"No access requests":"You have no access requests"),r().createElement(l.EmptyStateBody,null,t?"Click the button below to create an access request.":"You have no pending Red Hat access requests."),ze),Oe);var Ge="filter-status",je="Filter by ".concat(_(a[a.length-1])),He=r().createElement(l.Button,{variant:"link",onClick:function(){se([]),de(""),B(1)}},"Clear filters"),Me=r().createElement(l.Toolbar,{id:"access-requests-table-toolbar"},r().createElement(l.ToolbarContent,null,r().createElement(l.ToolbarItem,null,r().createElement(l.InputGroup,null,r().createElement(l.Dropdown,{isOpen:J,onSelect:function(e){K(!1),ee(e.target.value),re(!1),he(!0)},toggle:r().createElement(l.DropdownToggle,{onToggle:function(e){return K(e)}},r().createElement(h.ZP,null)," ",$),dropdownItems:(t?[1,5]:[6]).map((function(e){return a[e]})).map((function(e){return r().createElement(l.DropdownItem,{key:e,value:e,component:"button"},(0,f.kC)(e))}))}),["Status","Decision"].includes($)&&r().createElement(r().Fragment,null,r().createElement("span",{id:Ge,hidden:!0},je),r().createElement(l.Select,{"aria-labelledby":Ge,variant:"checkbox","aria-label":"Select statuses",onToggle:function(e){return re(e)},onSelect:function(e,t){he(!0),oe.includes(t)?se(oe.filter((function(e){return e!==t}))):se([].concat((0,s.Z)(oe),[t])),B(1)},isOpen:ne,selections:Array.from(oe),isCheckboxSelectionBadgeHidden:!0,placeholderText:je},Z.map((function(e){return r().createElement(l.SelectOption,{key:e,value:e},(0,f.kC)(e))})))),"Account number"===$&&r().createElement("form",{style:{display:"flex"},onSubmit:function(e){return e.preventDefault()}},r().createElement(l.TextInput,{name:"".concat($,"-filter"),id:"".concat($,"-filter"),type:"search",iconVariant:"search",placeholder:"Filter by ".concat(_($)),"aria-label":"".concat($," search input"),value:me,onChange:function(e){de(e),he(!0),B(1)}})))),r().createElement(l.ToolbarItem,null,ze),r().createElement(l.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},r().createElement(G,{id:"top"}))),r().createElement(l.ToolbarContent,null,r().createElement(l.ChipGroup,{categoryName:"Status"},oe.map((function(e){return r().createElement(l.Chip,{key:e,onClick:function(){se(oe.filter((function(t){return t!==e}))),B(1)}},e)}))),me&&r().createElement(l.ChipGroup,{categoryName:"Account number"},r().createElement(l.Chip,{onClick:function(){de(""),B(1)}},me)),ge&&He));function Ye(e){return t?0===e?30:15:[0,6].includes(e)?20:10}var Ue=(0,v.useRouteMatch)().url,Ve=r().createElement(i.TableComposable,{"aria-label":"Access requests table",variant:"compact"},r().createElement(i.Thead,null,r().createElement(i.Tr,null,a.map((function(e,t){return r().createElement(i.Th,(0,o.Z)({key:t},!e.includes("name")&&"Decision"!==e&&{sort:{sortBy:{index:q,direction:w},onSort:x,columnIndex:t}},{width:Ye(t)}),e)})),t&&r().createElement(i.Th,null))),r().createElement(i.Tbody,null,Se?(0,s.Z)(Array(Pe.length||O).keys()).map((function(e){return r().createElement(i.Tr,{key:e},a.map((function(e,t){return r().createElement(i.Td,{key:t,dataLabel:e},r().createElement("div",{style:{height:"30px"},className:"ins-c-skeleton ins-c-skeleton__md"}," "))})))})):Pe.map((function(e,n){return r().createElement(i.Tr,{key:n},r().createElement(i.Td,{dataLabel:a[0]},r().createElement(v.Link,{to:"".concat(Ue).concat(Ue.endsWith("/")?"":"/").concat(e[0])},e[0])),r().createElement(i.Td,{dataLabel:a[1]},e[1]),r().createElement(i.Td,{dataLabel:a[2]},e[2]),r().createElement(i.Td,{dataLabel:a[3]},e[3]),r().createElement(i.Td,{dataLabel:a[4]},e[4]),t?r().createElement(i.Td,{dataLabel:a[5]},r().createElement(y.p,{requestId:e[0],status:e[5],onLabelClick:function(){se([].concat((0,s.Z)(oe.filter((function(e){return e!==status}))),[status])),B(1)},hideActions:!0})):r().createElement(i.Td,{dataLabel:a[5]},e[5]),t?r().createElement(i.Td,{actions:(0,y.m)(e[5],e[0],Re)}):r().createElement(i.Td,{dataLabel:a[6]},r().createElement(y.p,{requestId:e[0],status:e[6]})))})),0===Pe.length&&ge&&r().createElement(i.Tr,null,r().createElement(i.Td,{colSpan:a.length},r().createElement(l.EmptyState,{variant:"small"},r().createElement(l.EmptyStateIcon,{icon:E.ZP}),r().createElement(l.Title,{headingLevel:"h2",size:"lg"},"No matching requests found"),r().createElement(l.EmptyStateBody,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."),He)))));return r().createElement(r().Fragment,null,Me,Ve,r().createElement(G,{id:"bottom"}),Oe)};q.propTypes={isInternal:T().bool};const k=q;var I=a(1140),P=a(22081),w=function(e){var t=e.isInternal;return r().createElement(c.zt,{store:I.Z.getStore()},r().createElement(P.Z,null,r().createElement(l.PageSection,{variant:"light"},r().createElement(l.Title,{headingLevel:"h1",className:"pf-u-pb-sm"},"Access Requests"),r().createElement("p",null,"Below is a list of all submitted requests for read only account access.")),r().createElement(l.PageSection,{padding:{default:"noPadding"}},r().createElement(k,{isInternal:t}))))};w.propTypes={isInternal:T().bool};const L=w}}]);