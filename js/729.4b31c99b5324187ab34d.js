(self.webpackChunk_redhat_cloud_services_access_requests_frontend=self.webpackChunk_redhat_cloud_services_access_requests_frontend||[]).push([[729,395],{20777:(e,t,n)=>{"use strict";t.lb={name:"PlusCircleIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z",yOffset:0,xOffset:0},t.wl=n(35183).createIcon(t.lb),t.ZP=t.wl},21458:(e,t,n)=>{"use strict";n.d(t,{wN:()=>r,FV:()=>c,L1:()=>l});var a=n(17558),r=function(e){return{type:a.Dv,payload:e}},c=function(e){return{type:a.Kf,payload:e}},l=function(){return{type:a.wt}}},85118:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var a="API_ERROR"},42395:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var a=n(92950),r=n.n(a),c=n(51352),l=n(334),o=n(56976),s=n(87462),u=n(42982),i=n(70885),m=n(98975),d=n(17733),p=n(42863),f=n(80164),E=n(48794),h=n(8755),g=n(20777),v=n(83215),y=n(42027),b=n(45697),S=n.n(b),T=n(24874);function C(e){return e[0].toLowerCase()+e.substring(1)}var Z=["pending","approved","denied","cancelled","expired"],I=function(e){var t=e.isInternal,n=t?["Request ID","Account number","Start date","End date","Created","Status"]:["Request ID","First name","Last name","Start date","End date","Created","Decision"],a=r().useState(t?4:5),b=(0,i.Z)(a,2),I=b[0],_=b[1],k=r().useState("desc"),q=(0,i.Z)(k,2),P=q[0],w=q[1],L=function(e,t,n){_(t),w(n)},R=r().useState(1),x=(0,i.Z)(R,2),D=x[0],A=x[1],N=r().useState(20),B=(0,i.Z)(N,2),F=B[0],O=B[1],z=function(e){var t=e.id;return r().createElement(o.Pagination,{itemCount:Ce,perPage:F,page:D,onSetPage:function(e,t){return A(t)},id:"access-requests-table-pagination-"+t,variant:t,perPageOptions:[5,10,20,50].map((function(e){return{title:e,value:e}})),onPerPageSelect:function(e,t){A(1),O(t)},isCompact:"top"===t})};z.propTypes={id:S().string};var j,G,K,H,M,V=r().useState(!1),Y=(0,i.Z)(V,2),U=Y[0],W=Y[1],J=r().useState(n[t?1:6]),Q=(0,i.Z)(J,2),X=Q[0],$=Q[1],ee=r().useState(!1),te=(0,i.Z)(ee,2),ne=te[0],ae=te[1],re=r().useState([]),ce=(0,i.Z)(re,2),le=ce[0],oe=ce[1],se=r().useState(""),ue=(0,i.Z)(se,2),ie=ue[0],me=ue[1],de=r().useState(!1),pe=(0,i.Z)(de,2),fe=pe[0],Ee=pe[1],he=le.length>0||ie,ge=r().useState(!0),ve=(0,i.Z)(ge,2),ye=ve[0],be=ve[1],Se=r().useState(0),Te=(0,i.Z)(Se,2),Ce=Te[0],Ze=Te[1],Ie=r().useState([]),_e=(0,i.Z)(Ie,2),ke=_e[0],qe=_e[1],Pe=(0,c.I0)(),we=function(){be(!0);var e=new URL("".concat(window.location.origin).concat("/api/rbac/v1","/cross-account-requests/"));t&&e.searchParams.append("query_by","user_id"),e.searchParams.append("offset",(D-1)*F),e.searchParams.append("limit",F),ie&&e.searchParams.append("account",ie),le.length>0&&e.searchParams.append("status",le.join(","));var a="".concat("desc"===P?"-":"").concat(n[I].toLowerCase().replace(" ","_"));e.searchParams.append("order_by",a),T.Z.get(e.href,{headers:{Accept:"application/json"}}).then((function(e){Ze(e.meta.count),qe(e.data.map((function(e){return t?[e.request_id,e.target_account,e.start_date,e.end_date,e.created,e.status]:[e.request_id,e.first_name,e.last_name,e.start_date,e.end_date,e.created,e.status]}))),be(!1)})).catch((function(e){be(!1),Pe((0,v.wN)({variant:"danger",title:"Could not list access requests",description:e.message}))}))},Le=(j=ie,400,G=r().useState(j),H=(K=(0,i.Z)(G,2))[0],M=K[1],r().useEffect((function(){var e=setTimeout((function(){M(j)}),400);return function(){clearTimeout(e)}}),[j]),H);r().useEffect((function(){we()}),[Le,le,I,P,F,D]);var Re=r().useState({type:null}),xe=(0,i.Z)(Re,2),De=xe[0],Ae=xe[1],Ne=function(e){Ae({type:null}),e&&we()},Be=r().createElement(r().Fragment,null,"cancel"===De.type&&r().createElement(d.Z,{requestId:De.requestId,onClose:Ne}),["edit","create"].includes(De.type)&&r().createElement(p.Z,{variant:De.type,requestId:De.requestId,onClose:Ne})),Fe=t&&r().createElement(o.Button,{variant:"primary",onClick:function(){return Ae({type:"create"})}},"Create request");if(0===ke.length&&!ye&&!fe)return r().createElement(o.Bullseye,{style:{height:"auto"},className:"pf-u-mt-lg"},r().createElement(o.EmptyState,{variant:"large"},r().createElement(o.EmptyStateIcon,{icon:g.ZP}),r().createElement(o.Title,{headingLevel:"h3",size:"lg"},t?"No access requests":"You have no access requests"),r().createElement(o.EmptyStateBody,null,t?"Click the button below to create an access request.":"You have no pending Red Hat access requests."),Fe),Be);var Oe="filter-status",ze="Filter by ".concat(C(n[n.length-1])),je=r().createElement(o.Button,{variant:"link",onClick:function(){oe([]),me("")}},"Clear filters"),Ge=r().createElement(o.Toolbar,{id:"access-requests-table-toolbar"},r().createElement(o.ToolbarContent,null,r().createElement(o.ToolbarItem,null,r().createElement(o.InputGroup,null,r().createElement(o.Dropdown,{isOpen:U,onSelect:function(e){W(!1),$(e.target.value),ae(!1),Ee(!0)},toggle:r().createElement(o.DropdownToggle,{onToggle:function(e){return W(e)}},r().createElement(h.ZP,null)," ",X),dropdownItems:(t?[1,5]:[6]).map((function(e){return n[e]})).map((function(e){return r().createElement(o.DropdownItem,{key:e,value:e,component:"button"},(0,f.kC)(e))}))}),["Status","Decision"].includes(X)&&r().createElement(r().Fragment,null,r().createElement("span",{id:Oe,hidden:!0},ze),r().createElement(o.Select,{"aria-labelledby":Oe,variant:"checkbox","aria-label":"Select statuses",onToggle:function(e){return ae(e)},onSelect:function(e,t){Ee(!0),le.includes(t)?oe(le.filter((function(e){return e!==t}))):oe([].concat((0,u.Z)(le),[t]))},isOpen:ne,selections:Array.from(le),isCheckboxSelectionBadgeHidden:!0,placeholderText:ze},Z.map((function(e){return r().createElement(o.SelectOption,{key:e,value:e},(0,f.kC)(e))})))),"Account number"===X&&r().createElement("form",{style:{display:"flex"},onSubmit:function(e){return e.preventDefault()}},r().createElement(o.TextInput,{name:"".concat(X,"-filter"),id:"".concat(X,"-filter"),type:"search",iconVariant:"search",placeholder:"Filter by ".concat(C(X)),"aria-label":"".concat(X," search input"),value:ie,onChange:function(e){me(e),Ee(!0)}})))),r().createElement(o.ToolbarItem,null,Fe),r().createElement(o.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},r().createElement(z,{id:"top"}))),r().createElement(o.ToolbarContent,null,r().createElement(o.ChipGroup,{categoryName:"Status"},le.map((function(e){return r().createElement(o.Chip,{key:e,onClick:function(){return oe(le.filter((function(t){return t!==e})))}},e)}))),ie&&r().createElement(o.ChipGroup,{categoryName:"Account number"},r().createElement(o.Chip,{onClick:function(){return me("")}},ie)),he&&je));function Ke(e){return t?0===e?30:15:[0,6].includes(e)?20:10}var He=(0,l.useRouteMatch)().url,Me=r().createElement(m.TableComposable,{"aria-label":"Access requests table",variant:"compact"},r().createElement(m.Thead,null,r().createElement(m.Tr,null,n.map((function(e,t){return r().createElement(m.Th,(0,s.Z)({key:t},!e.includes("name")&&"Decision"!==e&&{sort:{sortBy:{index:I,direction:P},onSort:L,columnIndex:t}},{width:Ke(t)}),e)})),t&&r().createElement(m.Th,null))),r().createElement(m.Tbody,null,ye?(0,u.Z)(Array(ke.length||F).keys()).map((function(e){return r().createElement(m.Tr,{key:e},n.map((function(e,t){return r().createElement(m.Td,{key:t,dataLabel:e},r().createElement("div",{style:{height:"30px"},className:"ins-c-skeleton ins-c-skeleton__md"}," "))})))})):ke.map((function(e,a){return r().createElement(m.Tr,{key:a},r().createElement(m.Td,{dataLabel:n[0]},r().createElement(l.Link,{to:"".concat(He).concat(He.endsWith("/")?"":"/").concat(e[0])},e[0])),r().createElement(m.Td,{dataLabel:n[1]},e[1]),r().createElement(m.Td,{dataLabel:n[2]},e[2]),r().createElement(m.Td,{dataLabel:n[3]},e[3]),r().createElement(m.Td,{dataLabel:n[4]},e[4]),t?r().createElement(m.Td,{dataLabel:n[5]},r().createElement(y.p,{requestId:e[0],status:e[5],onLabelClick:function(){return oe([].concat((0,u.Z)(le.filter((function(e){return e!==status}))),[status]))},hideActions:!0})):r().createElement(m.Td,{dataLabel:n[5]},e[5]),t?r().createElement(m.Td,{actions:(0,y.m)(e[5],e[0],Ae)}):r().createElement(m.Td,{dataLabel:n[6]},r().createElement(y.p,{requestId:e[0],status:e[6]})))})),0===ke.length&&he&&r().createElement(m.Tr,null,r().createElement(m.Td,{colSpan:n.length},r().createElement(o.EmptyState,{variant:"small"},r().createElement(o.EmptyStateIcon,{icon:E.ZP}),r().createElement(o.Title,{headingLevel:"h2",size:"lg"},"No matching requests found"),r().createElement(o.EmptyStateBody,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."),je)))));return r().createElement(r().Fragment,null,Ge,Me,r().createElement(z,{id:"bottom"}),Be)};I.propTypes={isInternal:S().bool};const _=I;var k=function(e){var t=e.getRegistry,n=e.isInternal;return r().createElement(c.zt,{store:t().getStore()},r().createElement(o.PageSection,{variant:"light"},r().createElement(o.Title,{headingLevel:"h1",className:"pf-u-pb-sm"},"Access Requests"),r().createElement("p",null,"Below is a list of all submitted requests for read only account access.")),r().createElement(o.PageSection,{padding:{default:"noPadding"}},r().createElement(_,{isInternal:n})))};k.propTypes={getRegistry:S().func,isInternal:S().bool};const q=(0,l.withRouter)(k)},1140:(e,t,n)=>{"use strict";n.d(t,{g:()=>i,Z:()=>d});var a=n(92950),r=n(9036),c=n(84885),l=n(83215),o=n(4942),s=n(85118);const u=(0,o.Z)({},s.j,(function(e,t){return{errorCode:t.payload}}));var i=(0,a.createContext)({getRegistry:function(){}}),m=new r.ZP({},[(0,c.ZP)({errorTitleKey:["message"],errorDescriptionKey:["errors","stack"]})]);m.register({errorReducer:(0,r.Gg)(u),notifications:l.ee});const d=m},72307:(e,t,n)=>{"use strict";n.d(t,{I:()=>l});var a=n(6526),r=n(420);function c(e){void 0===e&&(e=a.E);var t=e===a.E?r.o:(0,r.f)(e);return function(){return t().dispatch}}var l=c()},45467:()=>{},34946:()=>{},30187:()=>{},66822:()=>{},49854:()=>{}}]);
//# sourceMappingURL=../sourcemaps/729.7196a82aa90ae4100d147c333ad93ac6.js.map